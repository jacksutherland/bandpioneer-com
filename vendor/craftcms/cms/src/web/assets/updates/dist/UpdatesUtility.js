/*! For license information please see UpdatesUtility.js.LICENSE.txt */
!function(){var t={50:function(){},54:function(t,e,n){"use strict";function r(t,e){for(var n=[],r={},a=0;a<e.length;a++){var i=e[a],o=i[0],s={id:t+":"+a,css:i[1],media:i[2],sourceMap:i[3]};r[o]?r[o].parts.push(s):n.push(r[o]={id:o,parts:[s]})}return n}n.d(e,{A:function(){return h}});var a="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!a)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},o=a&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,u=!1,c=function(){},p=null,d="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(t,e,n,a){u=n,p=a||{};var o=r(t,e);return v(o),function(e){for(var n=[],a=0;a<o.length;a++){var s=o[a];(l=i[s.id]).refs--,n.push(l)}for(e?v(o=r(t,e)):o=[],a=0;a<n.length;a++){var l;if(0===(l=n[a]).refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete i[l.id]}}}}function v(t){for(var e=0;e<t.length;e++){var n=t[e],r=i[n.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](n.parts[a]);for(;a<n.parts.length;a++)r.parts.push(y(n.parts[a]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var o=[];for(a=0;a<n.parts.length;a++)o.push(y(n.parts[a]));i[n.id]={id:n.id,refs:1,parts:o}}}}function g(){var t=document.createElement("style");return t.type="text/css",o.appendChild(t),t}function y(t){var e,n,r=document.querySelector("style["+d+'~="'+t.id+'"]');if(r){if(u)return c;r.parentNode.removeChild(r)}if(f){var a=l++;r=s||(s=g()),e=x.bind(null,r,a,!1),n=x.bind(null,r,a,!0)}else r=g(),e=C.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}var m,b=(m=[],function(t,e){return m[t]=e,m.filter(Boolean).join("\n")});function x(t,e,n,r){var a=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=b(e,a);else{var i=document.createTextNode(a),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(i,o[e]):t.appendChild(i)}}function C(t,e){var n=e.css,r=e.media,a=e.sourceMap;if(r&&t.setAttribute("media",r),p.ssrId&&t.setAttribute(d,e.id),a&&(n+="\n/*# sourceURL="+a.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},725:function(t,e,n){var r=n(50);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals),(0,n(54).A)("43063986",r,!0,{})}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={id:r,exports:{}};return t[r](i,i.exports,n),i.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){e=function(){return r};var n,r={},a=Object.prototype,i=a.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function p(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(n){p=function(t,e,n){return t[e]=n}}function d(t,e,n,r){var a=e&&e.prototype instanceof b?e:b,i=Object.create(a.prototype),s=new _(r||[]);return o(i,"_invoke",{value:E(t,n,s)}),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}r.wrap=d;var h="suspendedStart",v="suspendedYield",g="executing",y="completed",m={};function b(){}function x(){}function C(){}var w={};p(w,l,(function(){return this}));var I=Object.getPrototypeOf,U=I&&I(I(S([])));U&&U!==a&&i.call(U,l)&&(w=U);var T=C.prototype=b.prototype=Object.create(w);function L(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function $(e,n){function r(a,o,s,l){var u=f(e[a],e,o);if("throw"!==u.type){var c=u.arg,p=c.value;return p&&"object"==t(p)&&i.call(p,"__await")?n.resolve(p.__await).then((function(t){r("next",t,s,l)}),(function(t){r("throw",t,s,l)})):n.resolve(p).then((function(t){c.value=t,s(c)}),(function(t){return r("throw",t,s,l)}))}l(u.arg)}var a;o(this,"_invoke",{value:function(t,e){function i(){return new n((function(n,a){r(t,e,n,a)}))}return a=a?a.then(i,i):i()}})}function E(t,e,r){var a=h;return function(i,o){if(a===g)throw Error("Generator is already running");if(a===y){if("throw"===i)throw o;return{value:n,done:!0}}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var l=k(s,r);if(l){if(l===m)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===h)throw a=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=g;var u=f(t,e,r);if("normal"===u.type){if(a=r.done?y:v,u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=y,r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,a=t.iterator[r];if(a===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=n,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=f(a,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,m;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,m):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function S(e){if(e||""===e){var r=e[l];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(i.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}throw new TypeError(t(e)+" is not iterable")}return x.prototype=C,o(T,"constructor",{value:C,configurable:!0}),o(C,"constructor",{value:x,configurable:!0}),x.displayName=p(C,c,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,C):(t.__proto__=C,p(t,c,"GeneratorFunction")),t.prototype=Object.create(T),t},r.awrap=function(t){return{__await:t}},L($.prototype),p($.prototype,u,(function(){return this})),r.AsyncIterator=$,r.async=function(t,e,n,a,i){void 0===i&&(i=Promise);var o=new $(d(t,e,n,a),i);return r.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},L(T),p(T,c,"Generator"),p(T,l,(function(){return this})),p(T,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},r.values=S,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(N),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,a){return s.type="throw",s.arg=t,e.next=r,a&&(e.method="next",e.arg=n),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),N(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;N(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),m}},r}function r(t,e,n,r,a,i,o){try{var s=t[i](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,a)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(a,i){var o=t.apply(e,n);function s(t){r(o,a,i,s,l,"next",t)}function l(t){r(o,a,i,s,l,"throw",t)}s(void 0)}))}}n(725),function(t){Craft.UpdatesUtility=Garnish.Base.extend({$body:null,showUpdates:!1,criticalUpdateAvailable:!1,allowUpdates:null,installableUpdates:null,availableUpdatesCount:null,init:function(){var e=this;this.$body=t("#content");var n=t("#graphic"),r=t("#status");this.installableUpdates=[],this.availableUpdatesCount=0,Craft.cp.checkForUpdates(!0,!0,(function(a){if(e.allowUpdates=a.allowUpdates,a.updates.cms&&e.processUpdate(a.updates.cms,!1),a.updates.plugins&&a.updates.plugins.length)for(var i=0;i<a.updates.plugins.length;i++)e.processUpdate(a.updates.plugins[i],!0);if(e.showUpdates){if(n.remove(),r.remove(),e.availableUpdatesCount>0){var o=Craft.t("app","{num, number} {num, plural, =1{Available Update} other{Available Updates}}",{num:e.availableUpdatesCount});t("#header h1").text(o)}e.allowUpdates&&e.installableUpdates.length>1&&e.createUpdateForm(Craft.t("app","Update all"),e.installableUpdates).appendTo(Craft.cp.$header)}else n.removeClass("spinner").addClass("success"),r.text(Craft.t("app","Youâ€™re all up to date!"))}),(function(){n.removeClass("spinner").addClass("error"),r.text(Craft.t("app","Unable to fetch updates at this time."))}))},processUpdate:function(t,e){if(t.releases.length||t.abandoned){this.showUpdates=!0;var r=new n(this,t,e);r.installable&&this.installableUpdates.push(r),r.available&&this.availableUpdatesCount++}},createUpdateForm:function(e,n){var r=t("<form/>",{method:"post"});r.append(Craft.getCsrfInput()),r.append(t("<input/>",{type:"hidden",name:"action",value:"updater"})),r.append(t("<input/>",{type:"hidden",name:"return",value:"utilities/updates"}));for(var a=0;a<n.length;a++)r.append(t("<input/>",{type:"hidden",name:"install["+n[a].updateInfo.handle+"]",value:n[a].updateInfo.latestVersion})),r.append(t("<input/>",{type:"hidden",name:"packageNames["+n[a].updateInfo.handle+"]",value:n[a].updateInfo.packageName}));return r.append(t("<button/>",{type:"submit",text:e,class:"btn submit"})),r}});var n=Garnish.Base.extend({updateInfo:null,isPlugin:null,installable:!1,available:!1,$container:null,$header:null,$contents:null,$releaseContainer:null,$showAllLink:null,licenseHud:null,$licenseSubmitBtn:null,licenseSubmitAction:null,init:function(e,n,r){this.updatesPage=e,this.updateInfo=n,this.isPlugin=r,this.installable=this.available="phpIssue"!==this.updateInfo.status&&!!this.updateInfo.releases.length,this.createPane(),this.initReleases(),this.createHeading(),this.createCta(),this.updateInfo.abandoned?t('<blockquote class="note"><p>'+this.updateInfo.statusText+"</p></blockquote>").insertBefore(this.$releaseContainer):"eligible"!==this.updateInfo.status&&(t('<blockquote class="note ineligible"><p>'+this.updateInfo.statusText+"</p></blockquote>").insertBefore(this.$releaseContainer),null===this.updateInfo.latestVersion&&(this.installable=!1,this.available=!1),"expired"===this.updateInfo.status&&(this.installable=!1))},createPane:function(){this.$container=t('<div class="update"/>').appendTo(this.updatesPage.$body),this.$header=t('<div class="update-header"/>').appendTo(this.$container),this.$contents=t('<div class="readable"/>').appendTo(this.$container),this.$releaseContainer=t('<div class="releases"/>').appendTo(this.$contents)},createHeading:function(){t('<div class="readable left"/>').appendTo(this.$header).append(t("<h2/>",{text:this.updateInfo.name}))},createCta:function(){var n,r,i=this,o=t('<div class="buttons right"/>').appendTo(this.$header),s="menu-".concat(Math.floor(1e6*Math.random())),l=t("<button/>",{type:"button",class:"btn menubtn action-btn hairline-dark m","aria-label":Craft.t("app","Actions"),"aria-controls":s,title:Craft.t("app","Actions"),"data-disclosure-trigger":""}).appendTo(o);t("<div/>",{id:s,class:"menu menu--disclosure"}).appendTo(o),l.disclosureMenu().data("disclosureMenu").addItems([{icon:(r=a(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Craft.ui.icon("clipboard");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)}),label:Craft.t("app","Copy plugin handle"),onActivate:function(){Craft.ui.createCopyTextPrompt({label:Craft.t("app","Plugin Handle"),value:i.updateInfo.handle})}},{icon:(n=a(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Craft.ui.icon("clipboard");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)}),label:Craft.t("app","Copy package name"),onActivate:function(){Craft.ui.createCopyTextPrompt({label:Craft.t("app","Package Name"),value:i.updateInfo.packageName})}}]),this.updatesPage.allowUpdates&&this.updateInfo.latestVersion&&!1!==this.updateInfo.ctaUrl&&(void 0!==this.updateInfo.ctaUrl?t("<a/>",{class:"btn submit",text:this.updateInfo.ctaText,href:this.updateInfo.ctaUrl,target:"_blank"}).insertBefore(l):this.updatesPage.createUpdateForm(this.updateInfo.ctaText,[this]).insertBefore(l),void 0!==this.updateInfo.altCtaUrl?t("<a/>",{class:"btn hairline",text:this.updateInfo.altCtaText,href:this.updateInfo.altCtaUrl}).insertBefore(l):void 0!==this.updateInfo.altCtaText&&this.updatesPage.createUpdateForm(this.updateInfo.altCtaText,[this]).insertBefore(l).find("button").removeClass("submit").addClass("hairline"))},initReleases:function(){for(var t=0;t<this.updateInfo.releases.length;t++)new r(this,this.updateInfo.releases[t])}}),r=Garnish.Base.extend({update:null,releaseInfo:null,notesId:null,$container:null,$accordionTrigger:null,init:function(t,e){this.update=t,this.releaseInfo=e,this.notesId="notes-"+Math.floor(1e6*Math.random()),this.triggerId="".concat(this.notesId,"-trigger"),this.createContainer(),this.createHeading(),this.releaseInfo.notes&&(this.createReleaseNotes(),new Craft.Accordion(this.$accordionTrigger))},createContainer:function(){this.$container=t('<div class="pane release"/>').appendTo(this.update.$releaseContainer),this.releaseInfo.critical&&this.$container.addClass("release--critical")},createHeading:function(){var e,n=t("<h3/>",{class:"release-heading"}).appendTo(this.$container);this.releaseInfo.notes?(e=t("<a/>",{id:this.triggerId,class:"release-info fieldtoggle","aria-controls":this.notesId,"aria-expanded":"false",tabindex:"0",role:"button"}),this.$accordionTrigger=e):e=t("<div/>",{class:"release-info"}),e.appendTo(n),t("<span/>",{text:this.releaseInfo.version}).appendTo(e),this.releaseInfo.critical&&t("<strong/>",{class:"release-badge",text:Craft.t("app","Critical")}).appendTo(e),this.releaseInfo.date&&t("<span/>",{class:"release-date",text:Craft.formatDate(this.releaseInfo.date)}).appendTo(e)},createReleaseNotes:function(){var e=t("<div/>",{id:this.notesId,role:"region","aria-labelledby":this.triggerId}).appendTo(this.$container).append(t("<div/>",{class:"release-notes"}).html(this.releaseInfo.notes.replace(/(<\/?h)(3|4|5)\b/g,(function(t,e,n){return"".concat(e).concat(parseInt(n)+1,' class="h').concat(n,'"')}))));if(this.releaseInfo.critical||e.find("blockquote").length){if(!this.$accordionTrigger)return;this.$accordionTrigger.addClass("expanded").attr("aria-expanded","true")}else e.addClass("hidden")}},{maxInitialUpdateHeight:500})}(jQuery)}()}();
//# sourceMappingURL=UpdatesUtility.js.map