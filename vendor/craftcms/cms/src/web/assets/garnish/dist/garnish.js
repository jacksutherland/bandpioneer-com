/*! For license information please see garnish.js.LICENSE.txt */
!function(){var t={144:function(t,e,i){"use strict";t.exports=function(){if("object"==typeof globalThis)return globalThis;var t;try{t=this||new Function("return this")()}catch(t){if("object"==typeof window)return window;if("object"==typeof self)return self;if(void 0!==i.g)return i.g}return t}()},450:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return V}});var s=jQuery,n=i.n(s);function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var o=function(){};function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}o.extend=function(t,e){var i=o.prototype.extend;o._prototyping=!0;var s=new this;i.call(s,t),s.base=function(){},delete o._prototyping;var n=s.constructor,r=s.constructor=function(){if(!o._prototyping)if(this._constructing||this.constructor==r)this._constructing=!0,n.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||i).call(arguments[0],s)};return r.ancestor=this,r.extend=this.extend,r.forEach=this.forEach,r.implement=this.implement,r.prototype=s,r.toString=this.toString,r.valueOf=function(t){return"object"==t?r:n.valueOf()},i.call(r,e),"function"==typeof r.init&&r.init(),r},o.prototype={extend:function(t,e){if(arguments.length>1){var i=this[t];if(i&&"function"==typeof e&&(!i.valueOf||i.valueOf()!=e.valueOf())&&/\bbase\b/.test(e)){var s=e.valueOf();e=function(){var t=this.base||o.prototype.base;this.base=i;var e=s.apply(this,arguments);return this.base=t,e},e.valueOf=function(t){return"object"==t?e:s},e.toString=o.toString}this[t]=e}else if(t){var n=o.prototype.extend;o._prototyping||"function"==typeof this||(n=this.extend||n);for(var a={toSource:null},h=["constructor","toString","valueOf"],l=o._prototyping?0:1;c=h[l++];)t[c]!=a[c]&&n.call(this,c,t[c]);for(var c in t)if(!a[c]){var u=Object.getOwnPropertyDescriptor(t,c);"undefined"!=r(u.value)?n.call(this,c,u.value):Object.defineProperty(this,c,u)}}return this}},o=o.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(t,e,i){for(var s in t)void 0===this.prototype[s]&&e.call(i,t[s],s,t)},implement:function(){for(var t=0;t<arguments.length;t++)"function"==typeof arguments[t]?arguments[t](this.prototype):this.prototype.extend(arguments[t]);return this},toString:function(){return String(this.valueOf())}});var h=o.extend({settings:null,_eventHandlers:null,_namespace:null,_$listeners:null,_disabled:!1,constructor:function(){this._eventHandlers=[],this._namespace=".Garnish"+Math.floor(1e9*Math.random()),this._listeners=[],this.init.apply(this,arguments)},init:n().noop,setSettings:function(t,e){var i=void 0===this.settings?{}:this.settings;this.settings=n().extend({},i,e,t)},on:function(t,e,i){"function"==typeof e&&(i=e,e={}),t=j._normalizeEvents(t);for(var s=0;s<t.length;s++){var n=t[s];this._eventHandlers.push({type:n[0],namespace:n[1],data:e,handler:i})}},off:function(t,e){t=j._normalizeEvents(t);for(var i=0;i<t.length;i++)for(var s=t[i],n=this._eventHandlers.length-1;n>=0;n--){var r=this._eventHandlers[n];r.type!==s[0]||s[1]&&r.namespace!==s[1]||r.handler!==e||this._eventHandlers.splice(n,1)}},once:function(t,e,i){var s=this;"function"==typeof e&&(i=e,e={});var n=function(e){s.off(t,n),i(e)};this.on(t,e,n)},trigger:function(t,e){var i=this,s={type:t,target:this};this._eventHandlers.filter((function(e){return e.type===t})).forEach((function(t){var i=n().extend({data:t.data},e,s);t.handler(i)})),j._eventHandlers.filter((function(e){return e&&e.target&&i instanceof e.target&&e.type===t})).forEach((function(t){var i=n().extend({data:t.data},e,s);t.handler(i)}))},_splitEvents:function(t){if("string"==typeof t){t=t.split(",");for(var e=0;e<t.length;e++)t[e]=n().trim(t[e])}return t},_formatEvents:function(t){t=this._splitEvents(t).slice(0);for(var e=0;e<t.length;e++)t[e]+=this._namespace;return t.join(" ")},addListener:function(t,e,i,s){var r=n()(t);r.length&&(e=this._splitEvents(e),void 0===s&&"object"!==a(i)&&(s=i,i={}),s="function"==typeof s?s.bind(this):this[s].bind(this),r.on(this._formatEvents(e),i,n().proxy((function(){if(!this._disabled)return s.apply(this,arguments)}),this)),-1===n().inArray(t,this._listeners)&&this._listeners.push(t))},removeListener:function(t,e){n()(t).off(this._formatEvents(e))},removeAllListeners:function(t){n()(t).off(this._namespace)},disable:function(){this._disabled=!0},enable:function(){this._disabled=!1},destroy:function(){this.trigger("destroy"),this.removeAllListeners(this._listeners)}});function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=Array(e);i<e;i++)s[i]=t[i];return s}var u=h.extend({$items:null,dragging:!1,mousedownX:null,mousedownY:null,realMouseX:null,realMouseY:null,mouseX:null,mouseY:null,mouseDistX:null,mouseDistY:null,mouseOffsetX:null,mouseOffsetY:null,$targetItem:null,scrollProperty:null,scrollAxis:null,scrollDist:null,scrollFrame:null,_:null,init:function(t,e){void 0===e&&n().isPlainObject(t)&&(e=t,t=null),this.settings=n().extend({},j.BaseDrag.defaults,e),this.$items=n()(),this._={},t&&this.addItems(t)},allowDragging:function(){return!0},startDragging:function(){this.onBeforeDragStart(),this.dragging=!0,this.setScrollContainer(),this.onDragStart(),j.activateEventsMuted=!0},setScrollContainer:function(){for(this._.$scrollContainer=this.$targetItem.scrollParent();;){if(this._.$scrollContainer[0]===j.$doc[0]||this._.$scrollContainer[0]===j.$bod[0]){this._.$scrollContainer=j.$win;break}if(this.settings.axis!==j.X_AXIS&&this._.$scrollContainer[0].scrollHeight>this._.$scrollContainer[0].clientHeight||this.settings.axis!==j.Y_AXIS&&this._.$scrollContainer[0].scrollWidth>this._.$scrollContainer[0].clientWidth)break;this._.$scrollContainer=this._.$scrollContainer.scrollParent()}},isScrollingWindow:function(){return this._.$scrollContainer[0]===j.$win[0]},drag:function(t){var e=this;t&&(this.drag._scrollProperty=null,this.settings.axis!==j.X_AXIS&&(this.isScrollingWindow()?(this.drag._minMouseScrollY=j.$win.scrollTop(),this.drag._maxMouseScrollY=this.drag._minMouseScrollY+j.$win.height()):(this.drag._minMouseScrollY=this._.$scrollContainer.offset().top,this.drag._maxMouseScrollY=this.drag._minMouseScrollY+this._.$scrollContainer.outerHeight()),this.drag._minMouseScrollY+=j.BaseDrag.windowScrollTargetSize,this.drag._maxMouseScrollY-=j.BaseDrag.windowScrollTargetSize,this.mouseY<this.drag._minMouseScrollY?(this.drag._scrollProperty="scrollTop",this.drag._scrollAxis="Y",this.drag._scrollDist=Math.round((this.mouseY-this.drag._minMouseScrollY)/2)):this.mouseY>this.drag._maxMouseScrollY&&(this.drag._scrollProperty="scrollTop",this.drag._scrollAxis="Y",this.drag._scrollDist=Math.round((this.mouseY-this.drag._maxMouseScrollY)/2))),this.drag._scrollProperty||this.settings.axis===j.Y_AXIS||(this.isScrollingWindow()?(this.drag._minMouseScrollX=j.$win.scrollLeft(),this.drag._maxMouseScrollX=this.drag._minMouseScrollX+j.$win.width()):(this.drag._minMouseScrollX=this._.$scrollContainer.offset().left,this.drag._maxMouseScrollX=this.drag._minMouseScrollX+this._.$scrollContainer.outerWidth()),this.drag._minMouseScrollX+=j.BaseDrag.windowScrollTargetSize,this.drag._maxMouseScrollX-=j.BaseDrag.windowScrollTargetSize,this.mouseX<this.drag._minMouseScrollX?(this.drag._scrollProperty="scrollLeft",this.drag._scrollAxis="X",this.drag._scrollDist=Math.round((this.mouseX-this.drag._minMouseScrollX)/2)):this.mouseX>this.drag._maxMouseScrollX&&(this.drag._scrollProperty="scrollLeft",this.drag._scrollAxis="X",this.drag._scrollDist=Math.round((this.mouseX-this.drag._maxMouseScrollX)/2))),this.drag._scrollProperty?(this.scrollProperty||(this.scrollFrame&&(j.cancelAnimationFrame(this.scrollFrame),this.scrollFrame=null),this.scrollFrame=j.requestAnimationFrame((function(){e._scrollWindow()}))),this.scrollProperty=this.drag._scrollProperty,this.scrollAxis=this.drag._scrollAxis,this.scrollDist=this.drag._scrollDist):this._cancelWindowScroll()),this.onDrag()},stopDragging:function(){this.dragging=!1,this.onDragStop(),this._cancelWindowScroll(),j.requestAnimationFrame((function(){j.activateEventsMuted=!1}))},addItems:function(t){var e,i=this,s=function(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return c(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0,n=function(){};return{s:n,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,r=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw r}}}}(t=n().makeArray(t));try{var r=function(){var t=e.value;n().data(t,"drag")&&(console.warn("Element was added to more than one dragger"),n().data(t,"drag").removeItems(t)),n().data(t,"drag",i),i.addListener(i._getItemHandle(t),"mousedown",(function(e){i._handleMouseDown(e,t)}))};for(s.s();!(e=s.n()).done;)r()}catch(t){s.e(t)}finally{s.f()}this.$items=this.$items.add(t)},removeItems:function(t){t=n().makeArray(t);for(var e=0;e<t.length;e++){var i=t[e],s=n().inArray(i,this.$items);-1!==s&&(this._deinitItem(i),this.$items.splice(s,1))}},removeAllItems:function(){for(var t=0;t<this.$items.length;t++)this._deinitItem(this.$items[t]);this.$items=n()()},destroy:function(){this.removeAllItems(),this.base()},onBeforeDragStart:function(){this.trigger("beforeDragStart"),this.settings.onBeforeDragStart()},onDragStart:function(){j.requestAnimationFrame(function(){this.trigger("dragStart"),this.settings.onDragStart()}.bind(this))},onDrag:function(){j.requestAnimationFrame(function(){this.trigger("drag"),this.settings.onDrag()}.bind(this))},onDragStop:function(){j.requestAnimationFrame(function(){this.trigger("dragStop"),this.settings.onDragStop()}.bind(this))},_handleMouseDown:function(t,e){if(j.isPrimaryClick(t)&&!this.$targetItem){var i=n()(t.target);if((e===t.target||!this.settings.ignoreHandleSelector||!i.is(this.settings.ignoreHandleSelector)&&!i.closest(this.settings.ignoreHandleSelector).length)&&(t.preventDefault(),this.allowDragging())){this.$targetItem=n()(e),this.mousedownX=this.mouseX=t.pageX,this.mousedownY=this.mouseY=t.pageY;var s=this.$targetItem.offset();this.mouseOffsetX=t.pageX-s.left,this.mouseOffsetY=t.pageY-s.top,this.addListener(j.$doc,"mousemove","_handleMouseMove"),this.addListener(j.$doc,"mouseup","_handleMouseUp")}}},_getItemHandle:function(t){if(this.settings.handle){if("object"===l(this.settings.handle))return n()(this.settings.handle);if("string"==typeof this.settings.handle){var e=this.settings.handle.split(",").map((function(t){return Craft.ensureEndsWith(t.trim(),":first")})).join(",");return n()(e,t)}if("function"==typeof this.settings.handle)return n()(this.settings.handle(t))}return n()(t)},_handleMouseMove:function(t){var e;t.preventDefault(),this.realMouseX=t.pageX,this.realMouseY=t.pageY,this.settings.axis!==j.Y_AXIS&&(this.mouseX=t.pageX),this.settings.axis!==j.X_AXIS&&(this.mouseY=t.pageY),this.mouseDistX=this.mouseX-this.mousedownX,this.mouseDistY=this.mouseY-this.mousedownY,this.dragging||(this._handleMouseMove._mouseDist=j.getDist(this.mousedownX,this.mousedownY,this.realMouseX,this.realMouseY),this._handleMouseMove._mouseDist>=(null!==(e=this.settings.minMouseDist)&&void 0!==e?e:j.BaseDrag.minMouseDist)&&this.startDragging()),this.dragging&&this.drag(!0)},_handleMouseUp:function(t){this.removeAllListeners(j.$doc),this.dragging&&this.stopDragging(),this.$targetItem=null},_scrollWindow:function(){var t=this;this._.scrollPos=this._.$scrollContainer[this.scrollProperty](),this._.scrollTargetPos=this._.scrollPos+this.scrollDist,this._.scrollTargetPos<0?this._.scrollTargetPos=0:("Y"===this.scrollAxis?this._.scrollMax=this._.$scrollContainer[0].scrollHeight-this._.$scrollContainer.outerHeight():this._.scrollMax=this._.$scrollContainer[0].scrollWidth-this._.$scrollContainer.outerWidth(),this._.scrollTargetPos>this._.scrollMax&&(this._.scrollTargetPos=this._.scrollMax)),this._.$scrollContainer[this.scrollProperty](this._.scrollTargetPos),this.isScrollingWindow()&&(this["mouse"+this.scrollAxis]-=this._.scrollPos-j.$win[this.scrollProperty](),this["realMouse"+this.scrollAxis]=this["mouse"+this.scrollAxis]),this.scrollFrame=j.requestAnimationFrame((function(){t._scrollWindow()})),this.drag(!0)},_cancelWindowScroll:function(){this.scrollFrame&&(j.cancelAnimationFrame(this.scrollFrame),this.scrollFrame=null),this.scrollProperty=null,this.scrollAxis=null,this.scrollDist=null},_deinitItem:function(t){this.removeAllListeners(t),n().removeData(t,"drag")}},{minMouseDist:1,windowScrollTargetSize:25,defaults:{minMouseDist:null,handle:null,axis:null,ignoreHandleSelector:"input, textarea, button, select, .btn",onBeforeDragStart:n().noop,onDragStart:n().noop,onDrag:n().noop,onDragStop:n().noop}}),d=h.extend({$container:null,$all:null,$options:null,init:function(t){this.$container=n()(t),this.$container.data("checkboxSelect")&&(console.warn("Double-instantiating a checkbox select on an element"),this.$container.data("checkboxSelect").destroy()),this.$container.data("checkboxSelect",this);var e=this.$container.find("input");this.$all=e.filter(".all:first"),this.$options=e.not(this.$all),this.addListener(this.$all,"change","onAllChange")},onAllChange:function(){var t=this.$all.prop("checked");this.$options.prop({checked:t,disabled:t})},destroy:function(){this.$container.removeData("checkboxSelect"),this.base()}}),g=h.extend({$target:null,options:null,$menu:null,showingMenu:!1,init:function(t,e,i){this.$target=n()(t),this.$target.data("contextmenu")&&(console.warn("Double-instantiating a context menu on an element"),this.$target.data("contextmenu").destroy()),this.$target.data("contextmenu",this),this.options=e,this.setSettings(i,j.ContextMenu.defaults),j.ContextMenu.counter++,this.enable()},buildMenu:function(){this.$menu=n()('<div class="'+this.settings.menuClass+'" style="display: none" />');var t=n()("<ul/>").appendTo(this.$menu);for(var e in this.options)if(this.options.hasOwnProperty(e)){var i=this.options[e];if("-"===i)n()("<hr/>").appendTo(this.$menu),t=n()("<ul/>").appendTo(this.$menu);else{var s=n()("<li></li>").appendTo(t),r=n()("<a>"+i.label+"</a>").appendTo(s);"function"==typeof i.onClick&&function(t,e){setTimeout(function(){t.mousedown(function(t){this.hideMenu(),e.call(this.currentTarget,n().extend(t,{currentTarget:this.currentTarget}))}.bind(this))}.bind(this),1)}.call(this,r,i.onClick)}}},showMenu:function(t){"mousedown"===t.type&&t.which!==j.SECONDARY_CLICK||("contextmenu"===t.type&&t.preventDefault(),this.showing&&t.currentTarget===this.currentTarget||(this.currentTarget=t.currentTarget,this.$menu||this.buildMenu(),this.$menu.appendTo(document.body),this.$menu.show(),this.$menu.css({left:t.pageX+1,top:t.pageY-4}),this.showing=!0,this.trigger("show"),j.uiLayerManager.addLayer(this.$menu),j.uiLayerManager.registerShortcut(j.ESC_KEY,this.hideMenu.bind(this)),setTimeout(function(){this.addListener(j.$doc,"mousedown","hideMenu")}.bind(this),0)))},hideMenu:function(){this.removeListener(j.$doc,"mousedown"),this.$menu.hide(),this.showing=!1,this.trigger("hide"),j.uiLayerManager.removeLayer()},enable:function(){this.addListener(this.$target,"contextmenu,mousedown","showMenu")},disable:function(){this.removeListener(this.$target,"contextmenu,mousedown")},destroy:function(){this.$target.removeData("contextmenu"),this.base()}},{defaults:{menuClass:"menu"},counter:0});function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=Array(e);i<e;i++)s[i]=t[i];return s}var m=h.extend({settings:null,visible:!1,$container:null,$options:null,$ariaOptions:null,$anchor:null,menuId:null,_windowWidth:null,_windowHeight:null,_windowScrollLeft:null,_windowScrollTop:null,_anchorOffset:null,_anchorWidth:null,_anchorHeight:null,_anchorOffsetRight:null,_anchorOffsetBottom:null,_menuWidth:null,_menuHeight:null,init:function(t,e){this.setSettings(e,j.CustomSelect.defaults),this.$container=n()(t),this.$options=n()(),this.$ariaOptions=n()(),this.menuId="menu"+this._namespace,this.$container.attr({role:"listbox",id:this.menuId}),this.$container.find("ul").attr("role","group"),this.addOptions(this.$container.find("a,.menu-item,.menu-option")),this.settings.attachToElement&&(this.settings.anchor=this.settings.attachToElement,console.warn("The 'attachToElement' setting is deprecated. Use 'anchor' instead.")),this.settings.anchor&&(this.$anchor=n()(this.settings.anchor)),this.addListener(this.$container,"mousedown",(function(t){t.stopPropagation(),"INPUT"!==t.target.nodeName&&t.preventDefault()}))},addOptions:function(t){var e=this;this.$options=this.$options.add(t),t.data("menu",this);for(var i=function(){var i=t.eq(s),n=i.parent("li");i.attr({tabindex:"-1",id:i.attr("id")||"".concat(e.menuId,"-option-").concat(s+1)}),n.attr({role:"option","aria-selected":i.hasClass("sel")?"true":"false",id:n.attr("id")||"".concat(e.menuId,"-aria-option-").concat(s+1)}),e.$ariaOptions=e.$ariaOptions.add(n),i.data("menu-mutationObserver",new MutationObserver((function(t){var s,r=function(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return f(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?f(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0,n=function(){};return{s:n,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,r=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw r}}}}(t);try{for(r.s();!(s=r.n()).done;){var o=s.value;if("attributes"===o.type&&"class"===o.attributeName){var a=e.$options.is(".hover");n.attr("aria-selected",!a&&i.hasClass("sel")||i.hasClass("hover")?"true":"false");break}}}catch(t){r.e(t)}finally{r.f()}}))),i.data("menu-mutationObserver").observe(i[0],{attributes:!0})},s=0;s<t.length;s++)i();this.removeAllListeners(t),this.addListener(t,"click",(function(t){this.selectOption(t.currentTarget)}))},setPositionRelativeToAnchor:function(){this._windowWidth=j.$win.width(),this._windowHeight=j.$win.height(),this._windowScrollLeft=j.$win.scrollLeft(),this._windowScrollTop=j.$win.scrollTop(),this._anchorOffset=this.$anchor.offset(),this._anchorWidth=this.$anchor.outerWidth(),this._anchorHeight=this.$anchor.outerHeight(),this._anchorOffsetRight=this._anchorOffset.left+this._anchorHeight,this._anchorOffsetBottom=this._anchorOffset.top+this._anchorHeight,this.$container.css("minWidth",0),this.$container.css("minWidth",this._anchorWidth-(this.$container.outerWidth()-this.$container.width())),this._menuWidth=this.$container.outerWidth(),this._menuHeight=this.$container.outerHeight();var t=this._anchorOffset.top-this._windowScrollTop,e=this._windowHeight+this._windowScrollTop-this._anchorOffsetBottom;e>=this._menuHeight||t<this._menuHeight&&e>=t?this.$container.css({top:this._anchorOffsetBottom,maxHeight:e-this.settings.windowSpacing}):this.$container.css({top:this._anchorOffset.top-Math.min(this._menuHeight,t-this.settings.windowSpacing),maxHeight:t-this.settings.windowSpacing});var i=this.$container.data("align");if("left"!==i&&"center"!==i&&"right"!==i&&(i="left"),"center"===i)this._alignCenter();else{var s=this._windowWidth+this._windowScrollLeft-(this._anchorOffset.left+this._menuWidth),n=this._anchorOffsetRight-this._menuWidth;("right"===i&&n>=0||s<0)&&this._menuWidth<this._anchorOffset.left+this._anchorWidth?this._alignRight():this._alignLeft()}delete this._windowWidth,delete this._windowHeight,delete this._windowScrollLeft,delete this._windowScrollTop,delete this._anchorOffset,delete this._anchorWidth,delete this._anchorHeight,delete this._anchorOffsetRight,delete this._anchorOffsetBottom,delete this._menuWidth,delete this._menuHeight},show:function(){this.visible||(this.$container.appendTo(j.$bod),this.$anchor&&this.setPositionRelativeToAnchor(),this.$container.velocity("stop"),this.$container.css({opacity:1,display:"block"}),j.uiLayerManager.addLayer(this.$container).registerShortcut(j.ESC_KEY,this.hide.bind(this)),this.addListener(j.$scrollContainer,"scroll","setPositionRelativeToAnchor"),this.addListener(j.$win,"resize","setPositionRelativeToAnchor"),this.visible=!0,this.trigger("show"))},hide:function(){var t=this;this.visible&&(this.$options.removeClass("hover"),this.$options.filter(".sel").parent("li").attr("aria-selected","true"),this.$container.velocity("fadeOut",{duration:j.FX_DURATION},(function(){t.$container.detach()})),j.uiLayerManager.removeLayer(this.$container),this.removeListener(j.$scrollContainer,"scroll"),this.visible=!1,this.trigger("hide"))},selectOption:function(t){this.settings.onOptionSelect(t),this.trigger("optionselect",{selectedOption:t}),this.hide()},_alignLeft:function(){this.$container.css({left:this._anchorOffset.left,right:"auto"}),this._menuWidth>this._windowWidth-this._anchorOffset.left&&this.$container.css({maxWidth:this._windowWidth-this._anchorOffset.left-10})},_alignRight:function(){this.$container.css({right:this._windowWidth-(this._anchorOffset.left+this._anchorWidth),left:"auto"}),this._menuWidth>this._anchorOffset.left+this._anchorWidth&&this.$container.css({maxWidth:this._anchorOffset.left+this._anchorWidth-10})},_alignCenter:function(){var t=Math.round(this._anchorOffset.left+this._anchorWidth/2-this._menuWidth/2);t<0&&(t=0),this.$container.css("left",t)},destroy:function(){for(var t=0;t<this.$options.length;t++){var e=this.$options.eq(t);e.data("menu-mutationObserver").disconnect(),e.removeData("menu-mutationObserver")}this.base()}},{defaults:{anchor:null,windowSpacing:5,onOptionSelect:n().noop}});function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function v(){v=function(){return e};var t,e={},i=Object.prototype,s=i.hasOwnProperty,n=Object.defineProperty||function(t,e,i){t[e]=i.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",h=r.toStringTag||"@@toStringTag";function l(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,i){return t[e]=i}}function c(t,e,i,s){var r=e&&e.prototype instanceof _?e:_,o=Object.create(r.prototype),a=new L(s||[]);return n(o,"_invoke",{value:D(t,i,a)}),o}function u(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var d="suspendedStart",g="suspendedYield",f="executing",m="completed",$={};function _(){}function b(){}function y(){}var w={};l(w,o,(function(){return this}));var S=Object.getPrototypeOf,I=S&&S(S(H([])));I&&I!==i&&s.call(I,o)&&(w=I);var C=y.prototype=_.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function i(n,r,o,a){var h=u(t[n],t,r);if("throw"!==h.type){var l=h.arg,c=l.value;return c&&"object"==p(c)&&s.call(c,"__await")?e.resolve(c.__await).then((function(t){i("next",t,o,a)}),(function(t){i("throw",t,o,a)})):e.resolve(c).then((function(t){l.value=t,o(l)}),(function(t){return i("throw",t,o,a)}))}a(h.arg)}var r;n(this,"_invoke",{value:function(t,s){function n(){return new e((function(e,n){i(t,s,e,n)}))}return r=r?r.then(n,n):n()}})}function D(e,i,s){var n=d;return function(r,o){if(n===f)throw Error("Generator is already running");if(n===m){if("throw"===r)throw o;return{value:t,done:!0}}for(s.method=r,s.arg=o;;){var a=s.delegate;if(a){var h=E(a,s);if(h){if(h===$)continue;return h}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(n===d)throw n=m,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);n=f;var l=u(e,i,s);if("normal"===l.type){if(n=s.done?m:g,l.arg===$)continue;return{value:l.arg,done:s.done}}"throw"===l.type&&(n=m,s.method="throw",s.arg=l.arg)}}}function E(e,i){var s=i.method,n=e.iterator[s];if(n===t)return i.delegate=null,"throw"===s&&e.iterator.return&&(i.method="return",i.arg=t,E(e,i),"throw"===i.method)||"return"!==s&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+s+"' method")),$;var r=u(n,e.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,$;var o=r.arg;return o?o.done?(i[e.resultName]=o.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,$):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,$)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function H(e){if(e||""===e){var i=e[o];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function i(){for(;++n<e.length;)if(s.call(e,n))return i.value=e[n],i.done=!1,i;return i.value=t,i.done=!0,i};return r.next=r}}throw new TypeError(p(e)+" is not iterable")}return b.prototype=y,n(C,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:b,configurable:!0}),b.displayName=l(y,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,h,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},x(T.prototype),l(T.prototype,a,(function(){return this})),e.AsyncIterator=T,e.async=function(t,i,s,n,r){void 0===r&&(r=Promise);var o=new T(c(t,i,s,n),r);return e.isGeneratorFunction(i)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},x(C),l(C,h,"Generator"),l(C,o,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),i=[];for(var s in e)i.push(s);return i.reverse(),function t(){for(;i.length;){var s=i.pop();if(s in e)return t.value=s,t.done=!1,t}return t.done=!0,t}},e.values=H,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var i in this)"t"===i.charAt(0)&&s.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function n(s,n){return a.type="throw",a.arg=e,i.next=s,n&&(i.method="next",i.arg=t),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var h=s.call(o,"catchLoc"),l=s.call(o,"finallyLoc");if(h&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(h){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,$):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),$},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),M(i),$}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var s=i.completion;if("throw"===s.type){var n=s.arg;M(i)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,i,s){return this.delegate={iterator:H(e),resultName:i,nextLoc:s},"next"===this.method&&(this.arg=t),$}},e}function $(t,e,i,s,n,r,o){try{var a=t[r](o),h=a.value}catch(t){return void i(t)}a.done?e(h):Promise.resolve(h).then(s,n)}function _(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return b(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?b(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0,n=function(){};return{s:n,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,r=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw r}}}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=Array(e);i<e;i++)s[i]=t[i];return s}var y=h.extend({settings:null,$trigger:null,$container:null,$alignmentElement:null,$nextFocusableElement:null,$searchInput:null,_viewportWidth:null,_viewportHeight:null,_viewportScrollLeft:null,_viewportScrollTop:null,_alignmentElementOffset:null,_alignmentElementWidth:null,_alignmentElementHeight:null,_alignmentElementOffsetRight:null,_alignmentElementOffsetBottom:null,_menuWidth:null,_menuHeight:null,searchStr:"",clearSearchStrTimeout:null,init:function(t,e){if(this.setSettings(e,j.DisclosureMenu.defaults),this.$trigger=n()(t),this.$trigger.data("trigger"))console.warn("Double-instantiating a disclosure menu on an element");else{this.$trigger.attr("data-disclosure-trigger","true");var i=this.$trigger.attr("aria-controls");if(this.$container=n()("#"+i),!this.$container.length){var s=this.$trigger.next();if(!s.is("#".concat(i)))throw"No disclosure container found.";this.$container=s}this.$trigger.data("disclosureMenu",this),this.$container.data("disclosureMenu",this),this.$trigger.data("trigger",this),this.$container.data("trigger",this),this.$trigger.attr("aria-expanded")||this.$trigger.attr("aria-expanded","false");var r=this.$container.data("align-to");this.$alignmentElement=r?this.$trigger.find(r).first():this.$trigger,this.$container.appendTo(j.$bod),this.$trigger.parents(".slideout").length>0&&Craft.initUiElements(this.$container),this.addDisclosureMenuEventListeners(),this.settings.withSearchInput=this.settings.withSearchInput||j.hasAttr(this.$container,"data-with-search-input"),this.settings.withSearchInput&&this.addSearchInput(),j.DisclosureMenu.instances.push(this)}},addSearchInput:function(){var t=this,e=n()("<div/>",{class:"search-container"}).prependTo(this.$container),i=n()("<div/>",{class:"texticon search icon clearable"}).appendTo(e);this.$searchInput=n()("<input/>",{class:"fullwidth text",type:"text",inputmode:"search",autocomplete:"off",placeholder:Craft.t("app","Search")}).appendTo(i);var s=n()("<div/>",{class:"clear-btn hidden",title:Craft.t("app","Clear"),"aria-label":Craft.t("app","Clear")}).appendTo(i);this.$searchInput.on("input",(function(e){var i=t.$searchInput.val().toLowerCase().replace(/['"]/g,""),r=t.$container.find("li");if(i){s.removeClass("hidden");var o=n()();r.each((function(t,e){var s=n()(e);s.text().toLowerCase().includes(i)&&(o=o.add(s))})),o.removeClass("filtered"),r.not(o).addClass("filtered")}else s.addClass("hidden"),r.removeClass("filtered");t.setContainerPosition()})),this.addListener(this.$searchInput,"keydown",(function(e){switch(e.keyCode){case j.ESC_KEY:t.$searchInput.val("").trigger("input");break;case j.RETURN_KEY:e.preventDefault()}})),this.addListener(s,"click",(function(){t.$searchInput.val("").trigger("input").focus()}))},addDisclosureMenuEventListeners:function(){var t=this;this.addListener(this.$trigger,"mousedown",(function(e){e.stopPropagation(),e.preventDefault();var i,s=_(j.DisclosureMenu.instances);try{for(s.s();!(i=s.n()).done;){var n=i.value;n!==t&&n.handleMousedown(e)}}catch(t){s.e(t)}finally{s.f()}})),this.addListener(this.$trigger,"mouseup",(function(t){t.stopPropagation(),t.preventDefault()})),this.addListener(this.$trigger,"click",(function(e){e.stopPropagation(),e.preventDefault(),t.handleTriggerClick()})),this.addListener(this.$container,"keydown",(function(e){t.handleKeypress(e)})),this.addListener(j.$doc,"mousedown",(function(e){t.handleMousedown(e)})),this.addListener(this.$trigger,"keydown",(function(e){if(e.keyCode===j.TAB_KEY&&!e.shiftKey&&t.isExpanded()){var i=t.$container.find(":focusable:first");i.length&&(e.preventDefault(),i.focus())}}))},focusElement:function(t){if(t instanceof HTMLElement||t instanceof jQuery){var e=n()(t);return e.is(":focusable")||(e=e.find(":focusable")),void e.focus()}var i,s=n()(":focus"),r=this.$container.find(":focusable"),o=r.index(s);(i="prev"===t?o-1:o+1)>=0&&i<r.length&&r[i].focus()},handleMousedown:function(t){var e=t.target,i=n()(e).closest("[data-disclosure-trigger]"),s=this.$container[0]===t.target||this.$container.has(e).length>0;n()(i).is(this.$trigger)||s||this.hide()},handleKeypress:function(t){var e=this;if(!j.isCtrlKeyPressed(t)){switch(t.keyCode){case j.RIGHT_KEY:case j.DOWN_KEY:return t.preventDefault(),void this.focusElement("next");case j.LEFT_KEY:case j.UP_KEY:return t.preventDefault(),void this.focusElement("prev");case j.TAB_KEY:var i=this.$container.find(":focusable"),s=i.index(t.target);return void(0===s&&t.shiftKey?(t.preventDefault(),this.$trigger.focus()):s===i.length-1&&!t.shiftKey&&this.$nextFocusableElement&&(t.preventDefault(),this.$nextFocusableElement.focus()))}if("INPUT"!==t.target.nodeName&&t.key&&(t.key.match(/^[^ ]$/)||this.searchStr.length&&" "===t.key)){var n;this.searchStr+=t.key.toLowerCase();for(var r=this.$container.find("li"),o=0;o<r.length;o++){var a=r.eq(o);if(void 0===a.data("searchText")){var h=a.clone();h.find("svg").remove(),a.data("searchText",h.text().toLowerCase().trimStart())}if(a.data("searchText").startsWith(this.searchStr)){n=a;break}}n&&n.length&&this.focusElement(n),this.clearSearchStrTimeout&&clearTimeout(this.clearSearchStrTimeout),this.clearSearchStrTimeout=setTimeout((function(){e.clearSearchStr()}),1e3)}}},isExpanded:function(){return"true"===this.$trigger.attr("aria-expanded")},handleTriggerClick:function(){this.isExpanded()?this.hide():this.show()},show:function(){var t=this;if(!this.isExpanded()&&!this.$trigger.hasClass("disabled")){this.trigger("beforeShow"),this.$container.appendTo(j.$bod),this.setContainerPosition(),this.addListener(j.$scrollContainer,"scroll","setContainerPosition");var e=this.$trigger.scrollParent();e.get(0)!==document.body&&this.addListener(e,"scroll","setContainerPosition"),this.addListener(j.$win,"resize","setContainerPosition"),this.$container.velocity("stop"),this.$container.css({opacity:1,display:""}),"none"===this.$container.css("display")&&this.$container.css("display","block"),this.$trigger.attr("aria-expanded","true");var i=this.$container.find(":focusable")[0];i?i.focus():(this.$container.attr("tabindex","-1"),this.$container.focus());var s=j.$bod.find(":focusable"),n=s.index(this.$trigger[0]);-1!==n&&s.length>n+1&&(this.$nextFocusableElement=s.eq(n+1),this.addListener(this.$nextFocusableElement,"keydown",(function(e){if(e.keyCode===j.TAB_KEY&&e.shiftKey){var i=t.$container.find(":focusable:last");i.length&&(e.preventDefault(),i.focus())}}))),this.trigger("show"),this.clearSearchStr(),j.uiLayerManager.addLayer(this.$container),j.uiLayerManager.registerShortcut(j.ESC_KEY,function(){this.hide()}.bind(this))}},hide:function(){this.isExpanded()&&(this.$container.velocity("fadeOut",{duration:j.FX_DURATION}),this.$trigger.attr("aria-expanded","false"),this.focusIsInMenu()&&this.$trigger.focus(),this.$nextFocusableElement&&(this.removeListener(this.$nextFocusableElement,"keydown"),this.$nextFocusableElement=null),this.$searchInput&&this.$searchInput.val("").trigger("input"),this.trigger("hide"),this.clearSearchStr(),this.removeListener(j.$scrollContainer,"scroll"),this.removeListener(j.$win,"resize"),j.uiLayerManager.removeLayer(this.$container))},focusIsInMenu:function(){if(!this.$container.length)return!1;var t=j.getFocusedElement();return t.length&&n().contains(this.$container[0],t[0])},setContainerPosition:function(){this._viewportWidth=j.$win.width(),this._viewportHeight=j.$win.height(),this._viewportScrollLeft=j.$win.scrollLeft(),this._viewportScrollTop=j.$win.scrollTop(),this._alignmentElementOffset=this.$alignmentElement.offset(),this._alignmentElementWidth=this.$alignmentElement.outerWidth(),this._alignmentElementHeight=this.$alignmentElement.outerHeight(),this._alignmentElementOffsetRight=this._alignmentElementOffset.left+this._alignmentElementWidth,this._alignmentElementOffsetBottom=this._alignmentElementOffset.top+this._alignmentElementHeight,this.$container.css("minWidth",0),this.$container.css("minWidth",this._alignmentElementWidth-(this.$container.outerWidth()-this.$container.width())),this._menuWidth=this.$container.outerWidth(),this._menuHeight=this.$container.outerHeight(),this._menuWidth>this._viewportWidth&&(this.$container.css("maxWidth",this._viewportWidth),this._menuWidth=this._viewportWidth);var t=this._alignmentElementOffset.top-this._viewportScrollTop,e=this._viewportHeight+this._viewportScrollTop-this._alignmentElementOffsetBottom;"below"===this.settings.position||e>=this._menuHeight||t<this._menuHeight&&e>=t?this.$container.css({top:this._alignmentElementOffsetBottom,maxHeight:e-this.settings.windowSpacing}):this.$container.css({top:this._alignmentElementOffset.top-Math.min(this._menuHeight,t-this.settings.windowSpacing),maxHeight:t-this.settings.windowSpacing});var i=this.$container.data("align");if("left"!==i&&"center"!==i&&"right"!==i&&(i="left"),this._menuWidth===this._viewportWidth||"center"===i)this._alignCenter();else{var s=this._viewportWidth+this._viewportScrollLeft-(this._alignmentElementOffset.left+this._menuWidth),n=this._alignmentElementOffsetRight-this._menuWidth;n<0&&s<0?this._alignCenter():"right"===i&&n>=0||s<0?this._alignRight():this._alignLeft()}delete this._viewportWidth,delete this._viewportHeight,delete this._viewportScrollLeft,delete this._viewportScrollTop,delete this._alignmentElementOffset,delete this._alignmentElementWidth,delete this._alignmentElementHeight,delete this._alignmentElementOffsetRight,delete this._alignmentElementOffsetBottom,delete this._menuWidth,delete this._menuHeight},clearSearchStr:function(){this.searchStr="",this.clearSearchStrTimeout&&(clearTimeout(this.clearSearchStrTimeout),this.clearSearchStrTimeout=null)},isPadded:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ul";return this.$container.children("".concat(t,".padded")).length},createItem:function(t){var e,i=this;if(t.nodeType===Node.ELEMENT_NODE)return t;if(t instanceof jQuery)return t[0];if(!n().isPlainObject(t))throw"Unsupported item configuration.";e=t.type?t.type:t.url?"link":"button";var s,r=document.createElement("li"),o=document.createElement("button"===e?"button":"a");if(o.id=t.id||"menu-item-".concat(Math.floor(1e6*Math.random())),o.className="menu-item",t.selected&&o.classList.add("sel"),t.destructive&&(o.classList.add("error"),o.setAttribute("data-destructive","true")),t.disabled&&o.classList.add("disabled"),t.action&&(o.classList.add("formsubmit"),n()(o).formsubmit()),"link"===e&&(o.href=Craft.getUrl(t.url)),t.icon&&("string"==typeof t.icon?(o.setAttribute("data-icon",t.icon),t.iconColor&&o.classList.add(t.iconColor)):(s=v().mark((function e(){var i,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.icon instanceof Element)){e.next=4;break}i=t.icon,e.next=11;break;case 4:if("function"!=typeof t.icon){e.next=10;break}return e.next=7,t.icon();case 7:i=e.sent,e.next=11;break;case 10:throw"Unsupported icon type";case 11:(s=document.createElement("span")).className="icon",t.iconColor&&s.classList.add(t.iconColor),s.append(i),o.prepend(s);case 16:case"end":return e.stop()}}),e)})),function(){var t=this,e=arguments;return new Promise((function(i,n){var r=s.apply(t,e);function o(t){$(r,i,n,o,a,"next",t)}function a(t){$(r,i,n,o,a,"throw",t)}o(void 0)}))})()),t.action&&(o.setAttribute("data-action",t.action),o.setAttribute("data-form","false")),t.params&&o.setAttribute("data-params","string"==typeof t.params?t.params:JSON.stringify(t.params)),t.confirm&&o.setAttribute("data-confirm",t.confirm),t.redirect&&o.setAttribute("data-redirect",t.redirect),t.attributes)for(var a in t.attributes)o.setAttribute(a,t.attributes[a]);if(r.append(o),t.status){var h=document.createElement("div");h.className="status ".concat(t.status),o.append(h)}var l=document.createElement("span");if(l.className="menu-item-label",t.label?l.textContent=t.label:t.html&&(l.innerHTML=t.html),o.append(l),t.description){var c=document.createElement("div");c.className="menu-item-description smalltext light",c.textContent=t.description,o.append(c)}return"link"===e&&this.addListener(o,"keydown",(function(t){t.keyCode===j.SPACE_KEY&&o.click()})),this.addListener(o,"activate",(function(){t.onActivate?t.onActivate():t.callback&&t.callback(),setTimeout((function(){i.hide()}),1)})),r},addItem:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=this.createItem(t);e||(e=this.$container.children("ul").last().get(0)||this.addGroup()),i?e.prepend(s):e.append(s);var n=s.querySelector("a, button");return this.toggleItem(n,!t.hidden),n},addItems:function(t,e){var i,s=_(t);try{for(s.s();!(i=s.n()).done;){var n=i.value;this.addItem(n,e)}}catch(t){s.e(t)}finally{s.f()}},addHr:function(t){var e=document.createElement("hr");return this.isPadded("hr")&&(e.className="padded"),t?t.parentNode.insertBefore(e,t):this.$container.append(e),e},getFirstDestructiveGroup:function(){return this.$container.children("ul:has([data-destructive]):first").get(0)},addGroup:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=this.isPadded();if(t){var n=document.createElement("h6");s&&(n.className="padded"),n.textContent=t,i?i.parentNode.insertBefore(n,i):this.$container.append(n)}var r=document.createElement("ul");return s&&(r.className="padded"),i?i.parentNode.insertBefore(r,i):this.$container.append(r),e&&(r.previousElementSibling&&"HR"!==r.previousElementSibling.nodeName&&this.addHr(r),r.nextElementSibling&&"HR"!==r.nextElementSibling&&this.addHr(r.nextElementSibling)),this.updateHrVisibility(),r},toggleItem:function(t,e){void 0===e&&(e=t.parentNode.classList.contains("hidden")),e?this.showItem(t):this.hideItem(t)},showItem:function(t){var e=t.parentNode;e.classList.remove("hidden");var i=e.parentNode;i.classList.contains("hidden")&&i.classList.remove("hidden"),this.updateHrVisibility(),this.isExpanded()&&this.setContainerPosition()},hideItem:function(t){var e=t.parentNode;e.classList.add("hidden");var i=e.parentNode;0===i.querySelectorAll(":scope > li:not(.hidden)").length&&i.classList.add("hidden"),this.updateHrVisibility(),this.isExpanded()&&this.setContainerPosition()},removeItem:function(t){var e=t.parentNode,i=e.parentNode;e.remove(),0===i.querySelectorAll(":scope > li").length&&i.remove(),0===i.querySelectorAll(":scope > li:not(.hidden)").length&&i.classList.add("hidden"),this.updateHrVisibility(),this.isExpanded()&&this.setContainerPosition()},updateHrVisibility:function(){var t=this.$container.children(),e=!1;t.each((function(t,i){"HR"===i.nodeName?e?(i.classList.remove("hidden"),e=!1):i.classList.add("hidden"):i.classList.contains("hidden")||(e=!0)}))},destroy:function(){var t=this;this.$trigger.removeData("trigger"),j.DisclosureMenu.instances=j.DisclosureMenu.instances.filter((function(e){return e!==t})),this.base()},_alignLeft:function(){this.$container.css({left:Math.max(this._alignmentElementOffset.left,0),right:"auto"})},_alignRight:function(){var t=this._viewportWidth-(this._alignmentElementOffset.left+this._alignmentElementWidth);this.$container.css({right:Math.max(t,0),left:"auto"})},_alignCenter:function(){var t=Math.round(this._alignmentElementOffset.left+this._alignmentElementWidth/2-this._menuWidth/2);this.$container.css({left:Math.max(t,0),right:"auto"})}},{defaults:{position:null,windowSpacing:5,withSearchInput:!1},instances:[]});function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}var S=u.extend({targetItemWidth:null,targetItemHeight:null,targetItemPositionInDraggee:null,$draggee:null,otherItems:null,totalOtherItems:null,helpers:null,helperTargets:null,helperPositions:null,helperLagIncrement:null,updateHelperPosProxy:null,updateHelperPosFrame:null,lastMouseX:null,lastMouseY:null,_returningHelpersToDraggees:!1,init:function(t,e){void 0===e&&n().isPlainObject(t)&&(e=t,t=null),e=n().extend({},j.Drag.defaults,e),this.base(t,e)},allowDragging:function(){return!this._returningHelpersToDraggees},startDragging:function(){this.onBeforeDragStart(),this.helpers=[],this.helperTargets=[],this.helperPositions=[],this.lastMouseX=this.lastMouseY=null,this.targetItemWidth=this.$targetItem.outerWidth(),this.targetItemHeight=this.$targetItem.outerHeight(),this.draggeeDisplay=this.$targetItem.css("display"),this.setDraggee(this.findDraggee()),this.otherItems=[];for(var t=0;t<this.$items.length;t++){var e=this.$items[t];-1===n().inArray(e,this.$draggee)&&this.otherItems.push(e)}this.totalOtherItems=this.otherItems.length,this.updateHelperPosProxy||(this.updateHelperPosProxy=this._updateHelperPos.bind(this)),this.helperLagIncrement=1===this.helpers.length?0:this.settings.helperLagIncrementDividend/(this.helpers.length-1),this.updateHelperPosFrame=j.requestAnimationFrame(this.updateHelperPosProxy),this.dragging=!0,this.setScrollContainer(),this.onDragStart(),j.activateEventsMuted=!0},setDraggee:function(t){if(this.targetItemPositionInDraggee=n().inArray(this.$targetItem[0],t.add(this.$targetItem[0])),this.$draggee=n()([this.$targetItem[0]].concat(t.not(this.$targetItem).toArray())),this.settings.singleHelper)this._createHelper(0);else for(var e=0;e<this.$draggee.length;e++)this._createHelper(e);this.settings.removeDraggee?this.$draggee.hide():this.settings.collapseDraggees?(this.$targetItem.css("visibility","hidden"),this.$draggee.not(this.$targetItem).hide()):this.settings.hideDraggee&&this.$draggee.css("visibility","hidden")},appendDraggee:function(t){if(t.length){if(!this.settings.collapseDraggees)var e=this.$draggee.length;if(this.$draggee=n()(this.$draggee.toArray().concat(t.toArray())),!this.settings.collapseDraggees)for(var i=this.$draggee.length,s=e;s<i;s++)this._createHelper(s);this.settings.removeDraggee||this.settings.collapseDraggees?t.hide():this.settings.hideDraggee&&t.css("visibility","hidden")}},drag:function(t){this.draggeeVirtualMidpointX=this.mouseX-this.mouseOffsetX+this.targetItemWidth/2,this.draggeeVirtualMidpointY=this.mouseY-this.mouseOffsetY+this.targetItemHeight/2,this.base(t)},stopDragging:function(){j.cancelAnimationFrame(this.updateHelperPosFrame),this.base()},findDraggee:function(){switch(w(this.settings.filter)){case"function":return this.settings.filter();case"string":return this.$items.filter(this.settings.filter);default:return this.$targetItem}},getHelperTargetX:function(t){return!t&&this.settings.moveHelperToCursor?this.mouseX:this.mouseX-this.mouseOffsetX},getHelperTargetY:function(t){return!t&&this.settings.moveHelperToCursor?this.mouseY:this.mouseY-this.mouseOffsetY},returnHelpersToDraggees:function(){this._returningHelpersToDraggees=!0;for(var t=0;t<this.helpers.length;t++){var e=this.$draggee.eq(t),i=this.helpers[t];e.css({display:this.draggeeDisplay,visibility:this.settings.hideDraggee?"hidden":""});var s,n=e.offset();s=0===t?this._showDraggee.bind(this):null,i.velocity({left:n.left,top:n.top},j.FX_DURATION,s)}},onReturnHelpersToDraggees:function(){j.requestAnimationFrame(function(){this.trigger("returnHelpersToDraggees"),this.settings.onReturnHelpersToDraggees()}.bind(this))},_createHelper:function(t){var e=this.$draggee.eq(t),i=e.clone().addClass("draghelper");e.parents("#content").length&&i.addClass("drag-in-content"),e.parents(".slideout-container").length&&i.addClass("drag-in-slideout"),this.settings.copyDraggeeInputValuesToHelper&&j.copyInputValues(e,i),i.find("[name]").attr("name",""),i.outerWidth(Math.ceil(e.outerWidth())).outerHeight(Math.ceil(e.outerHeight())).css({margin:0,"pointer-events":"none"}),this.settings.helper&&(i="function"==typeof this.settings.helper?this.settings.helper(i,t):n()(this.settings.helper).append(i)),i.appendTo(j.$bod);var s=this._getHelperTarget(t,!0);i.css({position:"absolute",top:s.top,left:s.left,zIndex:this.settings.helperBaseZindex+this.$draggee.length-t,display:this.draggeeDisplay}),1!=this.settings.helperOpacity&&i.css("opacity",this.settings.helperOpacity),this.helperPositions[t]={top:s.top,left:s.left},this.helpers.push(i)},_updateHelperPos:function(){if(this.mouseX!==this.lastMouseX||this.mouseY!==this.lastMouseY){for(this._updateHelperPos._i=0;this._updateHelperPos._i<this.helpers.length;this._updateHelperPos._i++)this.helperTargets[this._updateHelperPos._i]=this._getHelperTarget(this._updateHelperPos._i);this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY}for(this._updateHelperPos._j=0;this._updateHelperPos._j<this.helpers.length;this._updateHelperPos._j++)this._updateHelperPos._lag=this.settings.helperLagBase+this.helperLagIncrement*this._updateHelperPos._j,this.helperPositions[this._updateHelperPos._j]={left:this.helperPositions[this._updateHelperPos._j].left+(this.helperTargets[this._updateHelperPos._j].left-this.helperPositions[this._updateHelperPos._j].left)/this._updateHelperPos._lag,top:this.helperPositions[this._updateHelperPos._j].top+(this.helperTargets[this._updateHelperPos._j].top-this.helperPositions[this._updateHelperPos._j].top)/this._updateHelperPos._lag},this.helpers[this._updateHelperPos._j].css(this.helperPositions[this._updateHelperPos._j]);this.updateHelperPosFrame=j.requestAnimationFrame(this.updateHelperPosProxy)},_getHelperTarget:function(t,e){return{left:this.getHelperTargetX(e)+this.settings.helperSpacingX*t,top:this.getHelperTargetY(e)+this.settings.helperSpacingY*t}},_showDraggee:function(){for(var t=0;t<this.helpers.length;t++)this.helpers[t].remove();this.helpers=null,this.$draggee.show().css("visibility",""),this.onReturnHelpersToDraggees(),this._returningHelpersToDraggees=!1}},{defaults:{filter:null,singleHelper:!1,collapseDraggees:!1,removeDraggee:!1,hideDraggee:!0,copyDraggeeInputValuesToHelper:!1,helperOpacity:1,moveHelperToCursor:!1,helper:null,helperBaseZindex:1e3,helperLagBase:3,helperLagIncrementDividend:1.5,helperSpacingX:5,helperSpacingY:5,onReturnHelpersToDraggees:n().noop}}),I=S.extend({$dropTargets:null,$activeDropTarget:null,init:function(t){t=n().extend({},j.DragDrop.defaults,t),this.base(t)},updateDropTargets:function(){this.settings.dropTargets&&("function"==typeof this.settings.dropTargets?this.$dropTargets=n()(this.settings.dropTargets()):this.$dropTargets=n()(this.settings.dropTargets),this.$dropTargets.length||(this.$dropTargets=null))},onDragStart:function(){this.updateDropTargets(),this.$activeDropTarget=null,this.base()},onDrag:function(){if(this.$dropTargets){for(this.onDrag._activeDropTarget=null,this.onDrag._i=0;this.onDrag._i<this.$dropTargets.length;this.onDrag._i++)if(this.onDrag._elem=this.$dropTargets[this.onDrag._i],j.hitTest(this.mouseX,this.mouseY,this.onDrag._elem)){this.onDrag._activeDropTarget=this.onDrag._elem;break}(this.$activeDropTarget&&this.onDrag._activeDropTarget!==this.$activeDropTarget[0]||!this.$activeDropTarget&&null!==this.onDrag._activeDropTarget)&&(this.$activeDropTarget&&this.$activeDropTarget.removeClass(this.settings.activeDropTargetClass),this.onDrag._activeDropTarget?this.$activeDropTarget=n()(this.onDrag._activeDropTarget).addClass(this.settings.activeDropTargetClass):this.$activeDropTarget=null,this.settings.onDropTargetChange(this.$activeDropTarget))}this.base()},onDragStop:function(){this.$dropTargets&&this.$activeDropTarget&&this.$activeDropTarget.removeClass(this.settings.activeDropTargetClass),this.base()},fadeOutHelpers:function(){for(var t=0;t<this.helpers.length;t++)!function(t){t.velocity("fadeOut",{duration:j.FX_DURATION,complete:function(){t.remove()}})}(this.helpers[t])}},{defaults:{dropTargets:null,onDropTargetChange:n().noop,activeDropTargetClass:"active"}}),C=u.extend({onDrag:function(t,e){this.$targetItem.css({left:this.mouseX-this.mouseOffsetX,top:this.mouseY-this.mouseOffsetY})}}),x=S.extend({$heightedContainer:null,$insertion:null,insertionVisible:!1,oldDraggeeIndexes:null,newDraggeeIndexes:null,closestItem:null,_midpointVersion:0,_$prevItem:null,init:function(t,e){void 0===e&&n().isPlainObject(t)&&(e=t,t=null),e=n().extend({},j.DragSort.defaults,e),this.base(t,e)},createInsertion:function(){if(this.settings.insertion)return"function"==typeof this.settings.insertion?n()(this.settings.insertion(this.$draggee)):n()(this.settings.insertion)},getHelperTargetX:function(){return 1!==this.settings.magnetStrength?(this.getHelperTargetX._draggeeOffsetX=this.$draggee.offset().left,this.getHelperTargetX._draggeeOffsetX+(this.mouseX-this.mouseOffsetX-this.getHelperTargetX._draggeeOffsetX)/this.settings.magnetStrength):this.base()},getHelperTargetY:function(){return 1!==this.settings.magnetStrength?(this.getHelperTargetY._draggeeOffsetY=this.$draggee.offset().top,this.getHelperTargetY._draggeeOffsetY+(this.mouseY-this.mouseOffsetY-this.getHelperTargetY._draggeeOffsetY)/this.settings.magnetStrength):this.base()},canInsertBefore:function(t){return!0},canInsertAfter:function(t){return!0},onDragStart:function(){if(this.oldDraggeeIndexes=this._getDraggeeIndexes(),this.settings.moveTargetItemToFront&&this.$draggee.length>1&&this._getItemIndex(this.$draggee[0])>this._getItemIndex(this.$draggee[1])&&this.$draggee.first().insertBefore(this.$draggee[1]),this.$insertion=this.createInsertion(),this._placeInsertionWithDraggee(),this.closestItem=null,this._clearMidpoints(),this.settings.container)for(this.$heightedContainer=n()(this.settings.container);!this.$heightedContainer.height();)this.$heightedContainer=this.$heightedContainer.parent();this.base()},onDrag:function(){this.$heightedContainer&&!j.hitTest(this.mouseX,this.mouseY,this.$heightedContainer)?this.closestItem&&(this.closestItem=null,this._removeInsertion()):this.closestItem!==(this.closestItem=this._getClosestItem())&&null!==this.closestItem&&this._updateInsertion(),this.base()},onDragStop:function(){this._removeInsertion(),this.settings.moveTargetItemToFront||0===this.targetItemPositionInDraggee||this.$targetItem.insertAfter(this.$draggee.eq(this.targetItemPositionInDraggee)),this.returnHelpersToDraggees(),this.base(),this.$items=n()().add(this.$items),this.newDraggeeIndexes=this._getDraggeeIndexes(),this.newDraggeeIndexes.join(",")!==this.oldDraggeeIndexes.join(",")&&this.onSortChange()},onInsertionPointChange:function(){j.requestAnimationFrame(function(){this.trigger("insertionPointChange"),this.settings.onInsertionPointChange()}.bind(this))},onSortChange:function(){j.requestAnimationFrame(function(){this.trigger("sortChange"),this.settings.onSortChange()}.bind(this))},_getItemIndex:function(t){return n().inArray(t,this.$items)},_getDraggeeIndexes:function(){for(var t=[],e=0;e<this.$draggee.length;e++)t.push(this._getItemIndex(this.$draggee[e]));return t},_getClosestItem:function(){for(this._getClosestItem._closestItem=null,this.settings.removeDraggee?this.insertionVisible&&this._testForClosestItem(this.$insertion[0]):this._testForClosestItem(this.$draggee[0]),this._getClosestItem._closestItem&&(this._getClosestItem._midpoint=this._getItemMidpoint(this._getClosestItem._closestItem)),this.settings.axis!==j.Y_AXIS&&(this._getClosestItem._startXDist=this._getClosestItem._lastXDist=this._getClosestItem._closestItem?Math.abs(this._getClosestItem._midpoint.x-this.draggeeVirtualMidpointX):null),this.settings.axis!==j.X_AXIS&&(this._getClosestItem._startYDist=this._getClosestItem._lastYDist=this._getClosestItem._closestItem?Math.abs(this._getClosestItem._midpoint.y-this.draggeeVirtualMidpointY):null),this._getClosestItem._$otherItem=this.$draggee.first().prev();this._getClosestItem._$otherItem.length&&(this._getClosestItem._midpoint=this._getItemMidpoint(this._getClosestItem._$otherItem[0]),this.settings.axis!==j.Y_AXIS&&(this._getClosestItem._xDist=Math.abs(this._getClosestItem._midpoint.x-this.draggeeVirtualMidpointX)),this.settings.axis!==j.X_AXIS&&(this._getClosestItem._yDist=Math.abs(this._getClosestItem._midpoint.y-this.draggeeVirtualMidpointY)),!(this.settings.axis===j.Y_AXIS||null!==this._getClosestItem._lastXDist&&this._getClosestItem._xDist>this._getClosestItem._lastXDist)||!(this.settings.axis===j.X_AXIS||null!==this._getClosestItem._lastYDist&&this._getClosestItem._yDist>this._getClosestItem._lastYDist));)this.settings.axis!==j.Y_AXIS&&(this._getClosestItem._lastXDist=this._getClosestItem._xDist),this.settings.axis!==j.X_AXIS&&(this._getClosestItem._lastYDist=this._getClosestItem._yDist),this.canInsertBefore(this._getClosestItem._$otherItem)&&this._testForClosestItem(this._getClosestItem._$otherItem[0]),this._getClosestItem._$otherItem=this._getClosestItem._$otherItem.prev();for(this.settings.axis!==j.Y_AXIS&&(this._getClosestItem._lastXDist=this._getClosestItem._startXDist),this.settings.axis!==j.X_AXIS&&(this._getClosestItem._lastYDist=this._getClosestItem._startYDist),this._getClosestItem._$otherItem=this.$draggee.last().next();this._getClosestItem._$otherItem.length&&(this._getClosestItem._midpoint=this._getItemMidpoint(this._getClosestItem._$otherItem[0]),this.settings.axis!==j.Y_AXIS&&(this._getClosestItem._xDist=Math.abs(this._getClosestItem._midpoint.x-this.draggeeVirtualMidpointX)),this.settings.axis!==j.X_AXIS&&(this._getClosestItem._yDist=Math.abs(this._getClosestItem._midpoint.y-this.draggeeVirtualMidpointY)),!(this.settings.axis===j.Y_AXIS||null!==this._getClosestItem._lastXDist&&this._getClosestItem._xDist>this._getClosestItem._lastXDist)||!(this.settings.axis===j.X_AXIS||null!==this._getClosestItem._lastYDist&&this._getClosestItem._yDist>this._getClosestItem._lastYDist));)this.settings.axis!==j.Y_AXIS&&(this._getClosestItem._lastXDist=this._getClosestItem._xDist),this.settings.axis!==j.X_AXIS&&(this._getClosestItem._lastYDist=this._getClosestItem._yDist),this.canInsertAfter(this._getClosestItem._$otherItem)&&this._testForClosestItem(this._getClosestItem._$otherItem[0]),this._getClosestItem._$otherItem=this._getClosestItem._$otherItem.next();return this._getClosestItem._closestItem===this.$draggee[0]||this.insertionVisible&&this._getClosestItem._closestItem===this.$insertion[0]?null:this._getClosestItem._closestItem},_clearMidpoints:function(){this._midpointVersion++,this._$prevItem=null},_getItemMidpoint:function(t){return n().data(t,"midpointVersion")!==this._midpointVersion&&(this._getItemMidpoint._repositionDraggee=!this.settings.axis&&(!this.settings.removeDraggee||this.insertionVisible)&&t!==this.$draggee[0]&&(!this.$insertion||t!==this.$insertion.get(0)),this._getItemMidpoint._repositionDraggee?(this._$prevItem||(this._$prevItem=(this.insertionVisible?this.$insertion:this.$draggee).first().prev()),this._moveDraggeeToItem(t),this.settings.removeDraggee?this._getItemMidpoint._$item=this.$insertion:this._getItemMidpoint._$item=this.$draggee):this._getItemMidpoint._$item=n()(t),this._getItemMidpoint._offset=this._getItemMidpoint._$item.offset(),n().data(t,"midpoint",{x:this._getItemMidpoint._offset.left+this._getItemMidpoint._$item.outerWidth()/2,y:this._getItemMidpoint._offset.top+this._getItemMidpoint._$item.outerHeight()/2}),n().data(t,"midpointVersion",this._midpointVersion),delete this._getItemMidpoint._$item,delete this._getItemMidpoint._offset,this._getItemMidpoint._repositionDraggee&&(this._$prevItem.length?this.$draggee.insertAfter(this._$prevItem):this.$draggee.prependTo(this.$draggee.parent()),this._placeInsertionWithDraggee())),n().data(t,"midpoint")},_testForClosestItem:function(t){this._testForClosestItem._midpoint=this._getItemMidpoint(t),this._testForClosestItem._mouseDistX=Math.abs(this._testForClosestItem._midpoint.x-this.draggeeVirtualMidpointX),this._testForClosestItem._mouseDistY=Math.abs(this._testForClosestItem._midpoint.y-this.draggeeVirtualMidpointY),(null===this._getClosestItem._closestItem||this._testForClosestItem._mouseDistY<this._getClosestItem._closestItemMouseDistY||this._testForClosestItem._mouseDistY===this._getClosestItem._closestItemMouseDistY&&this._testForClosestItem._mouseDistX<=this._getClosestItem._closestItemMouseDistX)&&(this._getClosestItem._closestItem=t,this._getClosestItem._closestItemMouseDistX=this._testForClosestItem._mouseDistX,this._getClosestItem._closestItemMouseDistY=this._testForClosestItem._mouseDistY)},_updateInsertion:function(){this.closestItem&&this._moveDraggeeToItem(this.closestItem),this._clearMidpoints(),this.onInsertionPointChange()},_moveDraggeeToItem:function(t){this.$draggee.index()<n()(t).index()?this.$draggee.insertAfter(t):this.$draggee.insertBefore(t),this._placeInsertionWithDraggee()},_placeInsertionWithDraggee:function(){this.$insertion&&(this.$insertion.insertBefore(this.$draggee.first()),this.insertionVisible=!0)},_removeInsertion:function(){this.insertionVisible&&(this.$insertion.remove(),this.insertionVisible=!1)}},{defaults:{container:null,insertion:null,moveTargetItemToFront:!1,magnetStrength:1,onInsertionPointChange:n().noop,onSortChange:n().noop}}),T=h.extend({handlers:null,init:function(){this.handlers=[],this.addListener(j.$bod,"keyup",(function(t){t.keyCode===j.ESC_KEY&&this.escapeLatest(t)}))},register:function(t,e){this.handlers.push({obj:t,func:e})},unregister:function(t){for(var e=this.handlers.length-1;e>=0;e--)this.handlers[e].obj===t&&this.handlers.splice(e,1)},escapeLatest:function(t){if(this.handlers.length){var e=this.handlers.pop();("function"==typeof e.func?e.func:e.obj[e.func]).call(e.obj,t),"function"==typeof e.obj.trigger&&e.obj.trigger("escape")}}}),D=h.extend({$trigger:null,$fixedTriggerParent:null,$hud:null,$tip:null,$body:null,$header:null,$footer:null,$mainContainer:null,$main:null,$shade:null,$nextFocusableElement:null,showing:!1,orientation:null,updatingSizeAndPosition:!1,windowWidth:null,windowHeight:null,scrollTop:null,scrollLeft:null,mainWidth:null,mainHeight:null,init:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.$trigger=n()(t),n().isPlainObject(i)&&(s=i,i=""),this.setSettings(s,j.HUD.defaults),this.on("show",this.settings.onShow),this.on("hide",this.settings.onHide),this.on("submit",this.settings.onSubmit),this.$trigger.attr("aria-expanded","false"),void 0===j.HUD.activeHUDs&&(j.HUD.activeHUDs={}),this.settings.withShade&&(this.$shade=n()("<div/>",{class:this.settings.shadeClass})),this.$hud=n()("<div/>",{class:this.settings.hudClass}).data("hud",this),this.$tip=n()("<div/>",{class:this.settings.tipClass}).appendTo(this.$hud),this.$body=n()("<form/>",{class:this.settings.bodyClass}).appendTo(this.$hud),this.$mainContainer=n()("<div/>",{class:this.settings.mainContainerClass}).appendTo(this.$body),this.$main=n()("<div/>",{class:this.settings.mainClass}).appendTo(this.$mainContainer),this.updateBody(i);var r=this.$trigger;do{if("fixed"===r.css("position")){this.$fixedTriggerParent=r;break}r=r.offsetParent()}while(r.length&&"HTML"!==r.prop("nodeName"));this.$fixedTriggerParent?this.$hud.css("position","fixed"):this.$hud.css("position","absolute"),this.addListener(this.$body,"submit","_handleSubmit"),this.settings.withShade&&this.settings.hideOnShadeClick&&this.addListener(this.$shade,"tap,click","hide"),this.settings.closeBtn&&this.addListener(this.settings.closeBtn,"activate","hide"),this.addListener(j.$win,"resize","updateSizeAndPosition"),this.$fixedTriggerParent||this.addListener(j.$scrollContainer,"scroll","updateSizeAndPosition"),this.settings.listenToMainResize&&this.addListener(this.$main,"resize","updateSizeAndPosition"),this.addListener(this.$trigger,"keydown",(function(t){if(t.keyCode===j.TAB_KEY&&!t.shiftKey&&e.showing){var i=j.getKeyboardFocusableElements(e.$hud).first();i.length&&(t.preventDefault(),i.focus())}})),this.addListener(this.$hud,"keydown",(function(t){if(t.keyCode===j.TAB_KEY){var e=j.getKeyboardFocusableElements(this.$hud),i=e.index(t.target);0===i&&t.shiftKey?(t.preventDefault(),this.$trigger.focus()):i===e.length-1&&!t.shiftKey&&this.$nextFocusableElement&&(t.preventDefault(),this.$nextFocusableElement.focus())}})),this.settings.showOnInit?(this.$hud.css("opacity",0),this.show(),this.$hud.css("opacity",1)):(this.$hud.appendTo(j.$bod),this.hideContainer()),j.HUD.instances.push(this)},updateBody:function(t){this.$main.html(""),this.$header&&(this.$hud.removeClass("has-header"),this.$header.remove(),this.$header=null),this.$footer&&(this.$hud.removeClass("has-footer"),this.$footer.remove(),this.$footer=null),this.$main.append(t);var e=this.$main.find("."+this.settings.headerClass+":first"),i=this.$main.find("."+this.settings.footerClass+":first");e.length&&(this.$header=e.insertBefore(this.$mainContainer),this.$hud.addClass("has-header")),i.length&&(this.$footer=i.insertAfter(this.$mainContainer),this.$hud.addClass("has-footer"))},show:function(t){var e=this;if(t&&t.stopPropagation&&t.stopPropagation(),!this.showing){if(this.settings.closeOtherHUDs)for(var i in j.HUD.activeHUDs)j.HUD.activeHUDs.hasOwnProperty(i)&&j.HUD.activeHUDs[i].hide();document.activeElement!==document.body&&n()(document.activeElement).blur(),this.settings.withShade&&(this.$shade.appendTo(j.$bod),this.$shade.show()),this.$hud.appendTo(j.$bod),this.$trigger.attr("aria-expanded","true"),this.showContainer(),this.showing=!0,j.HUD.activeHUDs[this._namespace]=this,j.uiLayerManager.addLayer(this.$hud),this.settings.hideOnEsc&&j.uiLayerManager.registerShortcut(j.ESC_KEY,this.hide.bind(this));var s=j.$bod.find(":focusable"),r=s.index(this.$trigger[0]);-1!==r&&s.length>r+1&&(this.$nextFocusableElement=s.eq(r+1),this.addListener(this.$nextFocusableElement,"keydown",(function(t){if(t.keyCode===j.TAB_KEY&&t.shiftKey){var i=j.getKeyboardFocusableElements(e.$hud).last();i.length&&(t.preventDefault(),i.focus())}}))),this.onShow(),this.enable(),this.updateRecords()&&(this.$hud.css("top",j.$scrollContainer.scrollTop()),this.updateSizeAndPosition(!0))}},showContainer:function(){this.$hud.show()},onShow:function(){this.trigger("show")},updateRecords:function(){var t=!1;return t=this.windowWidth!==(this.windowWidth=j.$win.width())||t,t=this.windowHeight!==(this.windowHeight=j.$win.height())||t,t=this.scrollTop!==(this.scrollTop=j.$scrollContainer.scrollTop())||t,t=this.scrollLeft!==(this.scrollLeft=j.$scrollContainer.scrollLeft())||t,t=this.mainWidth!==(this.mainWidth=this.$main.outerWidth())||t,this.mainHeight!==(this.mainHeight=this.$main.outerHeight())||t},updateSizeAndPosition:function(t){(!0===t||this.updateRecords()&&!this.updatingSizeAndPosition)&&(this.updatingSizeAndPosition=!0,j.requestAnimationFrame(this.updateSizeAndPositionInternal.bind(this)))},updateSizeAndPositionInternal:function(){var t,e,i,s,r,o,a,h,l,c;s=j.$win.scrollLeft(),r=j.$win.scrollTop(),t=this.$trigger.outerWidth(),e=this.$trigger.outerHeight(),i=this.$trigger.offset(),this.$fixedTriggerParent?(i.left-=s,i.top-=r,o=i,s=0,r=0,a=0,h=0):(o=j.getOffset(this.$trigger),a=j.$scrollContainer.scrollLeft(),h=j.$scrollContainer.scrollTop()),i.right=i.left+t,i.bottom=i.top+e,o.right=o.left+t,o.bottom=o.top+e,this.$hud.css({width:""}),this.$mainContainer.css({height:"","overflow-x":"","overflow-y":""}),l=this.$body.width(),c=this.$body.height();var u,d,g,f,m,p={bottom:this.windowHeight+h-o.bottom,top:o.top-h,right:this.windowWidth+a-o.right,left:o.left-a};this.orientation=null;for(var v=0;v<this.settings.orientations.length;v++){var $=this.settings.orientations[v],_="top"===$||"bottom"===$?c:l;if(p[$]-(this.settings.windowSpacing+this.settings.triggerSpacing)>=_){this.orientation=$;break}(!this.orientation||p[$]>p[this.orientation])&&(this.orientation=$)}if(this.orientation&&-1!==n().inArray(this.orientation,["bottom","top","right","left"])||(this.orientation="bottom"),this.tipClass&&this.$tip.removeClass(this.tipClass),this.tipClass=this.settings.tipClass+"-"+j.HUD.tipClasses[this.orientation],this.$tip.addClass(this.tipClass),"top"===this.orientation||"bottom"===this.orientation?(u=this.windowWidth-2*this.settings.windowSpacing,d=p[this.orientation]-this.settings.windowSpacing-this.settings.triggerSpacing):(u=p[this.orientation]-this.settings.windowSpacing-this.settings.triggerSpacing,d=this.windowHeight-2*this.settings.windowSpacing),u<this.settings.minBodyWidth&&(u=this.settings.minBodyWidth),d<this.settings.minBodyHeight&&(d=this.settings.minBodyHeight),(l>u||l<this.settings.minBodyWidth)&&(l=l>u?u:this.settings.minBodyWidth,this.$hud.width(l),this.mainWidth>u&&this.$mainContainer.css("overflow-x","scroll"),c=this.$body.height()),c>d||c<this.settings.minBodyHeight){var b=c=c>d?d:this.settings.minBodyHeight;this.$header&&(b-=this.$header.outerHeight()),this.$footer&&(b-=this.$footer.outerHeight()),this.$mainContainer.height(b),this.mainHeight>b&&this.$mainContainer.css("overflow-y","scroll")}this.$hud.css({"border-top-left-radius":"","border-top-right-radius":"","boredr-bottom-right-radius":"","border-bottom-left-radius":""});var y=parseInt(this.$hud.css("border-radius"));if("top"===this.orientation||"bottom"===this.orientation){var w=this.windowWidth+s-(l+this.settings.windowSpacing),S=s+this.settings.windowSpacing;(f=(g=i.left+Math.round(t/2))-Math.round(l/2))>w&&(f=w),f<S&&(f=S),this.$hud.css("left",f);var I=j.within(g-f-this.settings.tipWidth/2,0,l-this.settings.tipWidth);this.$tip.css({left:I,top:""}),"top"===this.orientation?(m=i.top-(c+this.settings.triggerSpacing),this.$hud.css("top",m)):(m=i.bottom+this.settings.triggerSpacing,this.$hud.css("top",m));var C="top"===this.orientation?"bottom":"top";I<y?this.$hud.css("border-".concat(C,"-left-radius"),2):I>l-y-this.settings.tipWidth&&this.$hud.css("border-".concat(C,"-right-radius"),2)}else{var x=this.windowHeight+r-(c+this.settings.windowSpacing),T=r+this.settings.windowSpacing;(m=(g=i.top+Math.round(e/2))-Math.round(c/2))>x&&(m=x),m<T&&(m=T),this.$hud.css("top",m);var D=j.within(g-m-this.settings.tipWidth/2,0,c-this.settings.tipWidth);this.$tip.css({top:D,left:""}),"left"===this.orientation?(f=i.left-(l+this.settings.triggerSpacing),this.$hud.css("left",f)):(f=i.right+this.settings.triggerSpacing,this.$hud.css("left",f));var E="left"===this.orientation?"right":"left";D<y?this.$hud.css("border-top-".concat(E,"-radius"),2):D>c-y-this.settings.tipWidth&&this.$hud.css("border-bottom-".concat(E,"-radius"),2)}this.updatingSizeAndPosition=!1,this.trigger("updateSizeAndPosition")},hide:function(){this.showing&&(this.disable(),this.$trigger.attr("aria-expanded","false"),this.hideContainer(),this.settings.withShade&&this.$shade.hide(),this.showing=!1,delete j.HUD.activeHUDs[this._namespace],j.uiLayerManager.removeLayer(),j.focusIsInside(this.$hud)&&this.$trigger.focus(),this.$nextFocusableElement&&(this.removeListener(this.$nextFocusableElement,"keydown"),this.$nextFocusableElement=null),this.onHide())},hideContainer:function(){this.$hud.hide()},onHide:function(){this.trigger("hide")},toggle:function(){this.showing?this.hide():this.show()},submit:function(){this.onSubmit()},onSubmit:function(){this.trigger("submit")},_handleSubmit:function(t){t.preventDefault(),this.submit()},destroy:function(){var t=this;this.$hud&&this.$hud.remove(),this.settings.withShade&&this.$shade&&this.$shade.remove(),j.HUD.instances=j.HUD.instances.filter((function(e){return e!==t})),this.base()}},{tipClasses:{bottom:"top",top:"bottom",right:"left",left:"right"},defaults:{shadeClass:"hud-shade",hudClass:"hud",tipClass:"tip",bodyClass:"body",headerClass:"hud-header",footerClass:"hud-footer",mainContainerClass:"main-container",mainClass:"main",orientations:["bottom","top","right","left"],triggerSpacing:10,windowSpacing:10,tipWidth:30,minBodyWidth:200,minBodyHeight:0,withShade:!0,onShow:n().noop,onHide:n().noop,onSubmit:n().noop,closeBtn:null,listenToMainResize:!0,showOnInit:!0,closeOtherHUDs:!0,hideOnEsc:!0,hideOnShadeClick:!0},instances:[]});function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=Array(e);i<e;i++)s[i]=t[i];return s}var A=h.extend({$btn:null,menu:null,showingMenu:!1,disabled:!0,observer:null,searchStr:"",clearSearchStrTimeout:null,init:function(t,e,i){var s=this;if(void 0===i&&n().isPlainObject(e)&&(i=e,e=null),this.$btn=n()(t),this.$btn.length){var r;this.$btn.data("menubtn")?(e||(r=this.$btn.data("menubtn").menu.$container),console.warn("Double-instantiating a menu button on an element"),this.$btn.data("menubtn").destroy()):e||(r=this.$btn.next(".menu").detach()),this.$btn.data("menubtn",this),this.setSettings(i,j.MenuBtn.defaults),this.menu=e||new j.CustomSelect(r),this.menu.$anchor=n()(this.settings.menuAnchor||this.$btn),this.menu.on("optionselect",function(t){this.onOptionSelect(t.selectedOption)}.bind(this)),this.menu.on("hide",(function(){s.clearSearchStr()})),this.menu.on("show",(function(){s.clearSearchStr()})),this.$btn.attr({role:"combobox","aria-controls":this.menu.menuId,"aria-haspopup":"listbox","aria-expanded":"false"});var o=this.$btn.attr("aria-labelledby");!this.menu.$container.attr("aria-labelledby")&&o&&this.menu.$container.attr("aria-labelledby",o),this.menu.on("hide",this.onMenuHide.bind(this)),this.addListener(this.$btn,"mousedown","onMouseDown"),this.addListener(this.$btn,"keydown","onKeyDown"),this.addListener(this.$btn,"blur","onBlur"),this.observer=new MutationObserver((function(t){var e,i=function(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return E(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?E(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0,n=function(){};return{s:n,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,r=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw r}}}}(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;if("attributes"===n.type&&"disabled"===n.attributeName){s.handleStatusChange();break}}}catch(t){i.e(t)}finally{i.f()}})),this.observer.observe(this.$btn[0],{attributes:!0}),this.handleStatusChange()}else console.warn("Menu button instantiated without a DOM element.")},onBlur:function(){this.showingMenu&&j.requestAnimationFrame(function(){n().contains(this.menu.$container.get(0),document.activeElement)||this.hideMenu()}.bind(this))},onKeyDown:function(t){var e=this;if(!j.isCtrlKeyPressed(t)){if(t.key&&(t.key.match(/^[^ ]$/)||this.searchStr.length&&" "===t.key)){var i;this.showingMenu||(this.showMenu(),0===(i=this.menu.$options.filter(".sel:first")).length&&(i=this.menu.$options.first())),this.searchStr+=t.key.toLowerCase();for(var s=0;s<this.menu.$options.length;s++){var n=this.menu.$options.eq(s);if(void 0===n.data("searchText")){var r=n.clone();r.find("svg").remove(),n.data("searchText",r.text().toLowerCase().trimStart())}if(n.data("searchText").startsWith(this.searchStr)){i=n;break}}return i&&i.length&&this.focusOption(i),this.clearSearchStrTimeout&&clearTimeout(this.clearSearchStrTimeout),void(this.clearSearchStrTimeout=setTimeout((function(){e.clearSearchStr()}),1e3))}if(this.showingMenu)switch(t.keyCode){case j.RETURN_KEY:case j.SPACE_KEY:case j.TAB_KEY:t.keyCode!==j.TAB_KEY&&t.preventDefault();var o=this.menu.$options.filter(".hover");o.length>0?o.get(0).click():this.hideMenu();break;case j.UP_KEY:case j.PAGE_UP_KEY:t.preventDefault();var a=t.keyCode===j.UP_KEY?1:10;this.moveFocusUp(a);break;case j.DOWN_KEY:case j.PAGE_DOWN_KEY:t.preventDefault();var h=t.keyCode===j.DOWN_KEY?1:10;this.moveFocusDown(h);break;case j.HOME_KEY:t.preventDefault(),this.focusFirstOption();break;case j.END_KEY:t.preventDefault(),this.focusLastOption()}else switch(t.keyCode){case j.RETURN_KEY:case j.SPACE_KEY:case j.DOWN_KEY:t.preventDefault(),this.showMenu(),this.focusSelectedOption();break;case j.UP_KEY:case j.HOME_KEY:t.preventDefault(),this.showMenu(),this.focusFirstOption();break;case j.END_KEY:t.preventDefault(),this.showMenu(),this.focusLastOption()}}},clearSearchStr:function(){this.searchStr="",this.clearSearchStrTimeout&&(clearTimeout(this.clearSearchStrTimeout),this.clearSearchStrTimeout=null)},focusOption:function(t){t.hasClass("hover")||(this.menu.$options.removeClass("hover"),this.menu.$ariaOptions.attr("aria-selected","false"),t.addClass("hover"),this.$btn.attr("aria-activedescendant",t.parent("li").attr("id")),j.scrollContainerToElement(this.menu.$container,t))},focusSelectedOption:function(){var t=this.menu.$options.filter(".sel:first");t.length?this.focusOption(t):this.focusFirstOption()},focusFirstOption:function(){var t=this.menu.$options.first();this.focusOption(t)},focusLastOption:function(){var t=this.menu.$options.last();this.focusOption(t)},moveFocusUp:function(t){var e=this.menu.$options.filter(".hover");if(e.length){for(var i=this.menu.$options.index(e[0]),s=this.menu.$options.eq(Math.max(i-t,0));s.hasClass("disabled")&&i-t>=0;)t++,s=this.menu.$options.eq(Math.max(i-t,0));this.focusOption(s)}else this.focusFirstOption()},moveFocusDown:function(t){var e=this.menu.$options.filter(".hover");if(e.length){for(var i=this.menu.$options.index(e[0]),s=this.menu.$options.eq(Math.min(i+t,this.menu.$options.length-1));s.hasClass("disabled")&&i+t<=this.menu.$options.length-1;)t++,s=this.menu.$options.eq(Math.min(i+t,this.menu.$options.length-1));this.focusOption(s)}else this.focusFirstOption()},onMouseDown:function(t){j.isPrimaryClick(t)&&"INPUT"!==t.target.nodeName&&(t.preventDefault(),this.showingMenu?this.hideMenu():this.showMenu())},showMenu:function(){this.disabled||(this.menu.show(),this.$btn.addClass("active"),this.$btn.focus(),this.$btn.attr("aria-expanded","true"),this.showingMenu=!0,setTimeout(function(){this.addListener(j.$doc,"mousedown","onMouseDown")}.bind(this),1))},hideMenu:function(){this.menu.hide()},onMenuHide:function(){this.$btn.removeClass("active"),this.$btn.attr({"aria-expanded":"false","aria-activedescendant":null}),this.showingMenu=!1,this.removeListener(j.$doc,"mousedown")},onOptionSelect:function(t){this.settings.onOptionSelect(t),this.trigger("optionSelect",{option:t})},enable:function(){this.$btn&&this.$btn.removeAttr("disabled")},disable:function(){this.$btn&&this.$btn.attr("disabled","disabled")},handleStatusChange:function(){this.$btn&&(j.hasAttr(this.$btn[0],"disabled")||"true"===this.$btn.attr("aria-disabled")?(this.disabled=!0,this.$btn.addClass("disabled")):(this.disabled=!1,this.$btn.removeClass("disabled")))},destroy:function(){this.menu.destroy(),this.$btn.removeData("menubtn"),this.observer.disconnect(),this.observer=null,this.base()}},{defaults:{menuAnchor:null,onOptionSelect:n().noop}}),M=h.extend({$container:null,elements:null,focussedElement:null,blurTimeout:null,init:function(t,e){this.$container=n()(t),this.setSettings(e,j.MixedInput.defaults),this.elements=[],this.$container.attr("tabindex",0),this.addListener(this.$container,"focus","onFocus")},getElementIndex:function(t){return n().inArray(t,this.elements)},isText:function(t){return"INPUT"===t.prop("nodeName")},onFocus:function(){if(this.elements.length){var t=this.elements[this.elements.length-1];this.setFocus(t),this.isText(t)&&this.setCaretPos(t,t.val().length)}else this.addTextElement()},addTextElement:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=new L(this);return this.addElement(i.$input,t,e),i.setWidth(),i},addElement:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===e)if(this.focussedElement){var s=this.focussedElement,n=this.getElementIndex(s);if(this.isText(s)){var r=s.prop("selectionStart"),o=s.prop("selectionEnd"),a=s.val(),h=a.substring(0,r),l=a.substring(o);if(h&&l){s.val(h).trigger("change");var c=new L(this);c.$input.val(l).trigger("change"),this.addElement(c.$input,n+1),e=n+1}else e=h?n+1:n}else e=n+1}else e=this.elements.length;void 0!==this.elements[e]?(t.insertBefore(this.elements[e]),this.elements.splice(e,0,t)):(e=this.elements.length,this.$container.append(t),this.elements.push(t)),this.isText(t)||(0!==e&&this.isText(this.elements[e-1])||(this.addTextElement(e),e++),e!==this.elements.length-1&&this.isText(this.elements[e+1])||this.addTextElement(e+1)),this.addListener(t,"click",(function(){this.setFocus(t)})),i&&setTimeout(function(){this.setFocus(t)}.bind(this),1)},removeElement:function(t){var e=this.getElementIndex(t);if(-1!==e){if(this.elements.splice(e,1),!this.isText(t)){var i=this.elements[e-1],s=this.elements[e];if(this.isText(i)&&this.isText(s)){var n=i.val(),r=n+s.val();i.val(r).trigger("change"),this.removeElement(s),this.setFocus(i),this.setCaretPos(i,n.length)}}t.remove()}},setFocus:function(t){this.$container.addClass("focus"),this.focussedElement?this.blurFocussedElement():this.$container.attr("tabindex","-1"),t.attr("tabindex","0"),t.focus(),this.focussedElement=t,this.addListener(t,"blur",(function(){this.blurTimeout=setTimeout(function(){this.focussedElement===t&&(this.blurFocussedElement(),this.focussedElement=null,this.$container.removeClass("focus"),this.$container.attr("tabindex","0"))}.bind(this),1)}))},blurFocussedElement:function(){this.removeListener(this.focussedElement,"blur"),this.focussedElement.attr("tabindex","-1")},focusPreviousElement:function(t){var e=this.getElementIndex(t);if(e>0){var i=this.elements[e-1];if(this.setFocus(i),this.isText(i)){var s=i.val().length;this.setCaretPos(i,s)}}},focusNextElement:function(t){var e=this.getElementIndex(t);if(e<this.elements.length-1){var i=this.elements[e+1];this.setFocus(i),this.isText(i)&&this.setCaretPos(i,0)}},focusStart:function(){var t=this.elements[0];this.setFocus(t),this.isText(t)&&this.setCaretPos(t,0)},focusEnd:function(){var t=this.elements[this.elements.length-1];this.setFocus(t),this.isText(t)&&this.setCaretPos(t,t.val().length)},setCarotPos:function(t,e){this.setCaretPos(t,e)},setCaretPos:function(t,e){t.prop("selectionStart",e),t.prop("selectionEnd",e)}}),L=h.extend({parentInput:null,$input:null,$stage:null,val:null,focussed:!1,interval:null,init:function(t){this.parentInput=t,this.$input=n()('<input type="text"/>').appendTo(this.parentInput.$container),this.$input.css("margin-right",2-L.padding+"px"),this.setWidth(!0),this.addListener(this.$input,"focus","onFocus"),this.addListener(this.$input,"blur","onBlur"),this.addListener(this.$input,"keydown","onKeyDown"),this.addListener(this.$input,"change","checkInput")},getIndex:function(){return this.parentInput.getElementIndex(this.$input)},buildStage:function(){this.$stage=n()("<stage/>").appendTo(j.$bod),this.$stage.css({position:"absolute",top:-9999,left:-9999,wordWrap:"nowrap"}),j.copyTextStyles(this.$input,this.$stage)},getTextWidth:function(t){return this.$stage||this.buildStage(),t&&(t=(t=(t=(t=t.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/ /g,"&nbsp;")),this.$stage.html(t),this.stageWidth=this.$stage.width(),this.stageWidth},onFocus:function(){this.focussed=!0,this.interval=setInterval(this.checkInput.bind(this),j.NiceText.interval),this.checkInput()},onBlur:function(){this.focussed=!1,clearInterval(this.interval),this.checkInput()},onKeyDown:function(t){switch(setTimeout(this.checkInput.bind(this),1),t.keyCode){case j.LEFT_KEY:j.isCtrlKeyPressed(t)?(t.preventDefault(),this.parentInput.focusStart()):0===this.$input.prop("selectionStart")&&0===this.$input.prop("selectionEnd")&&this.parentInput.focusPreviousElement(this.$input);break;case j.RIGHT_KEY:j.isCtrlKeyPressed(t)?(t.preventDefault(),this.parentInput.focusEnd()):this.$input.prop("selectionStart")===this.val.length&&this.$input.prop("selectionEnd")===this.val.length&&this.parentInput.focusNextElement(this.$input);break;case j.BACKSPACE_KEY:case j.DELETE_KEY:0===this.$input.prop("selectionStart")&&0===this.$input.prop("selectionEnd")&&(this.parentInput.focusPreviousElement(this.$input),t.preventDefault())}},getVal:function(){return this.val=this.$input.val(),this.val},setVal:function(t){this.$input.val(t),this.checkInput()},checkInput:function(){var t=this.val!==this.getVal();return t&&(this.setWidth(),this.onChange()),t},setWidth:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.stageWidth!==this.getTextWidth(this.val)||t){var e=this.stageWidth+L.padding;this.$input.width(e)}},onChange:n().noop},{padding:20}),H=h.extend({$container:null,$shade:null,$triggerElement:null,$liveRegion:n()('<span class="visually-hidden" role="status"></span>'),visible:!1,dragger:null,desiredWidth:null,desiredHeight:null,resizeDragger:null,resizeStartWidth:null,resizeStartHeight:null,init:function(t,e){void 0===e&&n().isPlainObject(t)&&(e=t,t=null),this.setSettings(e,j.Modal.defaults),this.$shade=n()('<div class="'+this.settings.shadeClass+'"/>'),t?this.$shade.insertBefore(t):this.$shade.appendTo(j.$bod),t&&(this.setContainer(t),j.addModalAttributes(t),this.settings.autoShow&&this.show()),this.settings.triggerElement?this.$triggerElement=this.settings.triggerElement:this.$triggerElement=j.getFocusedElement(),j.Modal.instances.push(this)},addLiveRegion:function(){this.$container&&this.$liveRegion.appendTo(this.$container)},setContainer:function(t){if(this.$container=n()(t),this.$container.data("modal")&&(console.warn("Double-instantiating a modal on an element"),this.$container.data("modal").destroy()),this.$container.data("modal",this),this.settings.draggable&&(this.dragger=new j.DragMove(this.$container,{handle:this.settings.dragHandleSelector?this.$container.find(this.settings.dragHandleSelector):this.$container})),this.settings.resizable){var e=n()('<div class="resizehandle"/>').appendTo(this.$container).append('<svg class="ltr" fill="none" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M20 0 0 20h2L20 2V0ZM20 6 6 20h2L20 8V6ZM20 12l-8 8h2l6-6v-2Z" fill="#000"/></svg><svg class="rtl" fill="none" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m0 0 20 20h-2L0 2V0ZM0 6l14 14h-2L0 8V6ZM0 12l8 8H6l-6-6v-2Z" fill="#000"/></svg>');this.resizeDragger=new j.BaseDrag(e,{onDragStart:this._handleResizeStart.bind(this),onDrag:this._handleResize.bind(this)})}this.addLiveRegion(),this.addListener(this.$container,"click",(function(t){t.stopPropagation()})),this.visible&&this.show()},show:function(){var t=this;this.settings.closeOtherModals&&j.Modal.visibleModal&&j.Modal.visibleModal!==this&&j.Modal.visibleModal.hide(),this.$container&&(this.$shade.appendTo(j.$bod).velocity("stop"),this.$container.appendTo(j.$bod).velocity("stop"),this.$container.show(),this.updateSizeAndPosition(),this.$shade.velocity("fadeIn",{duration:50,complete:function(){this.$container.velocity("fadeIn",{complete:function(){this.updateSizeAndPosition(),j.setFocusWithin(this.$container),this.onFadeIn()}.bind(this)})}.bind(this)}),this.settings.hideOnShadeClick&&this.addListener(this.$shade,"click","hide"),j.trapFocusWithin(this.$container),this.addListener(j.$win,"resize","_handleWindowResize")),this.enable(),this.visible||(this.visible=!0,j.Modal.visibleModal=this,j.uiLayerManager.addLayer(this.$container),j.hideModalBackgroundLayers(),this.settings.hideOnEsc&&j.uiLayerManager.registerShortcut(j.ESC_KEY,(function(){t.trigger("escape"),t.hide()})),j.$bod.addClass("no-scroll"),this.onShow())},onShow:function(){this.trigger("show"),this.settings.onShow()},quickShow:function(){this.show(),this.$container&&(this.$container.velocity("stop"),this.$container.show().css("opacity",1),this.$shade.velocity("stop"),this.$shade.show().css("opacity",1))},hide:function(t){var e,i;if(this.visible){this.disable(),t&&t.stopPropagation(),this.$container&&(this.$container.velocity("stop").velocity("fadeOut",{duration:j.FX_DURATION}),this.$shade.velocity("stop").velocity("fadeOut",{duration:j.FX_DURATION,complete:this.onFadeOut.bind(this)}),this.settings.hideOnShadeClick&&this.removeListener(this.$shade,"click"),this.removeListener(j.$win,"resize"));var s=this.$triggerElement;if(null!==(e=s)&&void 0!==e&&e.is(":hidden")){var r=s.closest(".menu--disclosure");if(r.length){var o=r.attr("id");s=n()('[aria-controls="'.concat(o,'"]'))}else s=null}null!==(i=s)&&void 0!==i&&i.length&&s.focus(),this.visible=!1,j.$bod.removeClass("no-scroll"),j.Modal.visibleModal=null,j.uiLayerManager.removeLayer(),j.resetModalBackgroundLayerVisibility(),this.onHide()}},onHide:function(){this.trigger("hide"),this.settings.onHide()},quickHide:function(){this.hide(),this.$container&&(this.$container.velocity("stop"),this.$container.css("opacity",0).hide(),this.$shade.velocity("stop"),this.$shade.css("opacity",0).hide(),this.onFadeOut())},updateSizeAndPosition:function(){this.$container&&(this.$container.css({width:this.desiredWidth?Math.max(this.desiredWidth,200):"",height:this.desiredHeight?Math.max(this.desiredHeight,200):"","min-width":"","min-height":""}),this.updateSizeAndPosition._windowWidth=j.$win.width(),this.updateSizeAndPosition._width=Math.min(this.getWidth(),this.updateSizeAndPosition._windowWidth-2*this.settings.minGutter),this.$container.css({width:this.updateSizeAndPosition._width,"min-width":this.updateSizeAndPosition._width,left:Math.round((this.updateSizeAndPosition._windowWidth-this.updateSizeAndPosition._width)/2)}),this.updateSizeAndPosition._windowHeight=j.$win.height(),this.updateSizeAndPosition._height=Math.min(this.getHeight(),this.updateSizeAndPosition._windowHeight-2*this.settings.minGutter),this.$container.css({height:this.updateSizeAndPosition._height,"min-height":this.updateSizeAndPosition._height,top:Math.round((this.updateSizeAndPosition._windowHeight-this.updateSizeAndPosition._height)/2)}),this.trigger("updateSizeAndPosition"))},onFadeIn:function(){this.trigger("fadeIn"),this.settings.onFadeIn()},onFadeOut:function(){this.trigger("fadeOut"),this.settings.onFadeOut()},getHeight:function(){if(!this.$container)throw"Attempted to get the height of a modal whose container has not been set.";return this.visible||this.$container.show(),this.getHeight._height=this.$container.outerHeight(),this.visible||this.$container.hide(),this.getHeight._height},getWidth:function(){if(!this.$container)throw"Attempted to get the width of a modal whose container has not been set.";return this.visible||this.$container.show(),this.getWidth._width=this.$container.outerWidth()+1,this.visible||this.$container.hide(),this.getWidth._width},_handleWindowResize:function(t){t.target===window&&this.updateSizeAndPosition()},_handleResizeStart:function(){this.resizeStartWidth=this.getWidth(),this.resizeStartHeight=this.getHeight()},_handleResize:function(){j.ltr?this.desiredWidth=this.resizeStartWidth+2*this.resizeDragger.mouseDistX:this.desiredWidth=this.resizeStartWidth-2*this.resizeDragger.mouseDistX,this.desiredHeight=this.resizeStartHeight+2*this.resizeDragger.mouseDistY,this.updateSizeAndPosition()},destroy:function(){var t=this;this.$container&&this.$container.removeData("modal").remove(),this.$shade&&this.$shade.remove(),this.dragger&&this.dragger.destroy(),this.resizeDragger&&this.resizeDragger.destroy(),j.Modal.instances=j.Modal.instances.filter((function(e){return e!==t})),this.base()}},{relativeElemPadding:8,defaults:{autoShow:!0,draggable:!1,dragHandleSelector:null,resizable:!1,minGutter:10,onShow:n().noop,onHide:n().noop,onFadeIn:n().noop,onFadeOut:n().noop,closeOtherModals:!1,hideOnEsc:!0,hideOnShadeClick:!0,triggerElement:null,shadeClass:"modal-shade"},instances:[],visibleModal:null}),P=h.extend({$btn:null,$btnLabel:null,$liveRegion:null,defaultMessage:null,busyMessage:null,failureMessage:null,retryMessage:null,successMessage:null,init:function(t,e){this.setSettings(e,j.MultiFunctionBtn.defaults),this.$btn=n()(t),this.$btn.data("multifunction-btn")&&(console.warn("Double-instantiating a multi-function button on an element"),this.$btn.data("multifunction-btn").destroy()),this.$btnLabel=this.$btn.find(".label"),this.defaultMessage=this.$btnLabel.text(),"status"===this.$btn.prev().attr("role")?this.$liveRegion=this.$btn.prev():(this.$liveRegion=n()("<div/>",{class:"visually-hidden",role:"status"}),this.$btn.before(this.$liveRegion)),this.busyMessage=this.$btn.data("busy-message")?this.$btn.data("busy-message"):Craft.t("app","Loading"),this.failureMessage=this.$btn.data("failure-message"),this.retryMessage=this.$btn.data("retry-message"),this.successMessage=this.$btn.data("success-message")?this.$btn.data("success-message"):Craft.t("app","Success")},busyEvent:function(){this.$btn.addClass(this.settings.busyClass),this.busyMessage&&this.updateMessages(this.busyMessage)},failureEvent:function(){var t=this;this.endBusyState(),(this.failureMessage||this.retryMessage)&&(this.failureMessage&&this.updateMessages(this.failureMessage),this.retryMessage&&(this.failureMessage?setTimeout((function(){t.updateMessages(t.retryMessage)}),this.settings.failureMessageDuration):this.updateMessages(this.retryMessage)))},successEvent:function(){this.endBusyState(),this.successMessage&&this.updateMessages(this.successMessage)},updateMessages:function(t){var e=this;this.$liveRegion.text(t),this.settings.changeButtonText&&this.$btnLabel.text(t),setTimeout((function(){e.$liveRegion.text()===t&&e.$liveRegion.empty()}),this.settings.clearLiveRegionTimeout)},endBusyState:function(){this.$btn.removeClass(this.settings.busyClass)},destroy:function(){this.$btn.removeData("multifunction-btn"),this.base()}},{defaults:{busyClass:"loading",clearLiveRegionTimeout:2500,failureMessageDuration:3e3,changeButtonText:!1}}),O=h.extend({$input:null,$hint:null,$stage:null,$charsLeft:null,autoHeight:null,maxLength:null,showCharsLeft:!1,showingHint:!1,val:null,inputBoxSizing:"content-box",width:null,height:null,minHeight:null,initialized:!1,init:function(t,e){this.$input=n()(t),this.settings=n().extend({},j.NiceText.defaults,e),this.isVisible()?this.initialize():this.addListener(j.$win,"resize","initializeIfVisible")},isVisible:function(){return this.$input.height()>0},initialize:function(){this.initialized||(this.initialized=!0,this.removeListener(j.$win,"resize"),this.maxLength=this.$input.attr("maxlength"),this.maxLength&&(this.maxLength=parseInt(this.maxLength)),this.maxLength&&(this.settings.showCharsLeft||j.hasAttr(this.$input,"data-show-chars-left"))&&(this.showCharsLeft=!0,this.$input.removeAttr("maxlength")),this.$input.data("nicetext")&&(console.warn("Double-instantiating a transparent text input on an element"),this.$input.data("nicetext").destroy()),this.$input.data("nicetext",this),this.getVal(),this.autoHeight=this.settings.autoHeight&&"TEXTAREA"===this.$input.prop("nodeName"),this.autoHeight&&(this.minHeight=this.getHeightForValue(""),this.updateHeight(),this.width=this.$input.width(),this.addListener(j.$win,"resize","updateHeightIfWidthChanged")),this.settings.hint&&(this.$hintContainer=n()('<div class="texthint-container"/>').insertBefore(this.$input),this.$hint=n()('<div class="texthint">'+this.settings.hint+"</div>").appendTo(this.$hintContainer),this.$hint.css({top:parseInt(this.$input.css("borderTopWidth"))+parseInt(this.$input.css("paddingTop")),left:parseInt(this.$input.css("borderLeftWidth"))+parseInt(this.$input.css("paddingLeft"))+1}),j.copyTextStyles(this.$input,this.$hint),this.val?this.$hint.hide():this.showingHint=!0,this.addListener(this.$hint,"mousedown",(function(t){t.preventDefault(),this.$input.focus()}))),this.showCharsLeft&&(this.$charsLeft=n()('<div aria-live="polite" class="'+this.settings.charsLeftClass+'"/>').insertAfter(this.$input),this.updateCharsLeft()),this.addListener(this.$input,"textchange","onTextChange"),this.addListener(this.$input,"keydown","onKeyDown"))},initializeIfVisible:function(){this.isVisible()&&this.initialize()},getVal:function(){return this.val=this.$input.val(),this.val},showHint:function(){this.$hint.velocity("fadeIn",{complete:j.NiceText.hintFadeDuration}),this.showingHint=!0},hideHint:function(){this.$hint.velocity("fadeOut",{complete:j.NiceText.hintFadeDuration}),this.showingHint=!1},onTextChange:function(){this.getVal(),this.$hint&&(this.showingHint&&this.val?this.hideHint():this.showingHint||this.val||this.showHint()),this.autoHeight&&this.updateHeight(),this.showCharsLeft&&this.updateCharsLeft()},onKeyDown:function(t){t.keyCode===j.RETURN_KEY&&j.isCtrlKeyPressed(t)&&(t.preventDefault(),this.$input.closest("form").submit())},buildStage:function(){this.$stage=n()("<stage/>").appendTo(j.$bod),this.$stage.css({display:"block",position:"absolute",top:-9999,left:-9999}),this.inputBoxSizing=this.$input.css("box-sizing"),"border-box"===this.inputBoxSizing&&this.$stage.css({"border-top":this.$input.css("border-top"),"border-right":this.$input.css("border-right"),"border-bottom":this.$input.css("border-bottom"),"border-left":this.$input.css("border-left"),"padding-top":this.$input.css("padding-top"),"padding-right":this.$input.css("padding-right"),"padding-bottom":this.$input.css("padding-bottom"),"padding-left":this.$input.css("padding-left"),"-webkit-box-sizing":this.inputBoxSizing,"-moz-box-sizing":this.inputBoxSizing,"box-sizing":this.inputBoxSizing}),j.copyTextStyles(this.$input,this.$stage)},getHeightForValue:function(t){if(this.$stage||this.buildStage(),"border-box"===this.inputBoxSizing?this.$stage.css("width",this.$input.outerWidth()):this.$stage.css("width",this.$input.width()),t)t=(t=(t=(t=t.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/ {2,}/g,(function(t){for(var e="",i=0;i<t.length-1;i++)e+="&nbsp;";return e+" "})),t=(t=t.replace(/[\n\r]$/g,"<br/>&nbsp;")).replace(/[\n\r]/g,"<br/>");else{t="&nbsp;";for(var e=1;e<this.$input.prop("rows");e++)t+="<br/>&nbsp;"}return this.$stage.html(t),"border-box"===this.inputBoxSizing?this.getHeightForValue._height=this.$stage.outerHeight():this.getHeightForValue._height=this.$stage.height(),this.minHeight&&this.getHeightForValue._height<this.minHeight&&(this.getHeightForValue._height=this.minHeight),this.getHeightForValue._height},updateHeight:function(){this.height!==(this.height=this.getHeightForValue(this.val))&&(this.$input.css("min-height",this.height),this.initialized&&this.onHeightChange())},updateHeightIfWidthChanged:function(){this.isVisible()&&this.width!==(this.width=this.$input.width())&&this.width&&this.updateHeight()},onHeightChange:function(){this.settings.onHeightChange()},updateCharsLeft:function(){this.updateCharsLeft._charsLeft=this.maxLength-this.val.length,this.$charsLeft.html(j.NiceText.charsLeftHtml(this.updateCharsLeft._charsLeft)),this.updateCharsLeft._charsLeft>=0?this.$charsLeft.removeClass(this.settings.negativeCharsLeftClass):this.$charsLeft.addClass(this.settings.negativeCharsLeftClass)},destroy:function(){this.$input.removeData("nicetext"),this.$hint&&this.$hint.remove(),this.$stage&&this.$stage.remove(),this.base()}},{interval:100,hintFadeDuration:50,charsLeftHtml:function(t){return t},defaults:{autoHeight:!0,showCharsLeft:!1,charsLeftClass:"chars-left",negativeCharsLeftClass:"negative-chars-left",onHeightChange:n().noop}});function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}var F=h.extend({$container:null,$items:null,$selectedItems:null,$focusedItem:null,mousedownTarget:null,mouseUpTimeout:null,callbackFrame:null,$focusable:null,$first:null,first:null,$last:null,last:null,init:function(t,e,i){this.$container=n()(t),void 0===e&&n().isPlainObject(t)?(i=t,t=null,e=null):void 0===i&&n().isPlainObject(e)&&(i=e,e=null),this.$container.data("select")&&(console.warn("Double-instantiating a select on an element"),this.$container.data("select").destroy()),this.$container.data("select",this),this.setSettings(i,j.Select.defaults),this.$items=n()(),this.$selectedItems=n()(),this.addItems(e),this.settings.allowEmpty&&!this.settings.checkboxMode&&this.addListener(this.$container,"click",(function(){this.ignoreClick?this.ignoreClick=!1:this.deselectAll(!0)}))},getItemIndex:function(t){return this.$items.index(t[0])},isSelected:function(t){if(j.isJquery(t)){if(!t[0])return!1;t=t[0]}return-1!==n().inArray(t,this.$selectedItems)},selectItem:function(t,e,i){this.settings.multi||this.deselectAll(),this.$first=this.$last=t,this.first=this.last=this.getItemIndex(t),e&&this.focusItem(t,i),this._selectItems(t)},selectAll:function(){this.settings.multi&&this.$items.length&&(this.first=0,this.last=this.$items.length-1,this.$first=this.$items.eq(this.first),this.$last=this.$items.eq(this.last),this._selectItems(this.$items))},selectRange:function(t,e){if(!this.settings.multi)return this.selectItem(t,!0,!0);var i,s;this.deselectAll(),this.$last=t,this.last=this.getItemIndex(t),this.focusItem(t,e),this.first<this.last?(i=this.first,s=this.last+1):(i=this.last,s=this.first+1),this._selectItems(this.$items.slice(i,s))},deselectItem:function(t){var e=this.getItemIndex(t);this.first===e&&(this.$first=this.first=null),this.last===e&&(this.$last=this.last=null),this._deselectItems(t)},deselectAll:function(t){t&&(this.$first=this.first=this.$last=this.last=null),this._deselectItems(this.$items)},deselectOthers:function(t){this.deselectAll(),this.selectItem(t,!0,!0)},toggleItem:function(t,e){this.isSelected(t)?this._canDeselect(t)&&this.deselectItem(t,!0):this.selectItem(t,!0,e)},clearMouseUpTimeout:function(){clearTimeout(this.mouseUpTimeout)},getFirstItem:function(){if(this.$items.length)return this.$items.first()},getLastItem:function(){if(this.$items.length)return this.$items.last()},isPreviousItem:function(t){return t>0},isNextItem:function(t){return t<this.$items.length-1},getPreviousItem:function(t){if(this.isPreviousItem(t))return this.$items.eq(t-1)},getNextItem:function(t){if(this.isNextItem(t))return this.$items.eq(t+1)},getItemToTheLeft:function(t){var e=j.ltr?"Previous":"Next";if(this["is"+e+"Item"](t)){if(this.settings.horizontal)return this["get"+e+"Item"](t);if(!this.settings.vertical)return this.getClosestItem(t,j.X_AXIS,"<")}},getItemToTheRight:function(t){var e=j.ltr?"Next":"Previous";if(this["is"+e+"Item"](t)){if(this.settings.horizontal)return this["get"+e+"Item"](t);if(!this.settings.vertical)return this.getClosestItem(t,j.X_AXIS,">")}},getItemAbove:function(t){if(this.isPreviousItem(t)){if(this.settings.vertical)return this.getPreviousItem(t);if(!this.settings.horizontal)return this.getClosestItem(t,j.Y_AXIS,"<")}},getItemBelow:function(t){if(this.isNextItem(t)){if(this.settings.vertical)return this.getNextItem(t);if(!this.settings.horizontal)return this.getClosestItem(t,j.Y_AXIS,">")}},getClosestItem:function(t,e,i){for(var s,n=j.Select.closestItemAxisProps[e],r=j.Select.closestItemDirectionProps[i],o=this.$items.eq(t),a=o.offset(),h=a[n.midpointOffset]+Math.round(o[n.midpointSizeFunc]()/2),l=null,c=null,u=null,d=t+(s=j.rtl&&e===j.X_AXIS?-1*r.step:r.step);void 0!==this.$items[d];d+=s){var g=this.$items.eq(d),f=g.offset();if(r.isNextRow(f[n.rowOffset],a[n.rowOffset])){if(null===l)l=f[n.rowOffset];else if(f[n.rowOffset]!==l)break;var m=f[n.midpointOffset]+Math.round(g[n.midpointSizeFunc]()/2),p=Math.abs(h-m);if(!(null===c||p<c))break;c=p,u=g}else if(r.isWrongDirection(f[n.rowOffset],a[n.rowOffset]))break}return u},getFurthestItemToTheLeft:function(t){return this.getFurthestItem(t,"ToTheLeft")},getFurthestItemToTheRight:function(t){return this.getFurthestItem(t,"ToTheRight")},getFurthestItemAbove:function(t){return this.getFurthestItem(t,"Above")},getFurthestItemBelow:function(t){return this.getFurthestItem(t,"Below")},getFurthestItem:function(t,e){for(var i,s;s=this["getItem"+e](t);)i=s,t=this.getItemIndex(i);return i},get totalSelected(){return this.getTotalSelected()},getTotalSelected:function(){return this.$selectedItems.length},addItems:function(t){for(var e=this,i=n()(t),s=0;s<i.length;s++){var r,o=i[s];n().data(o,"select")&&(console.warn("Element was added to more than one selector"),n().data(o,"select").removeItems(o)),n().data(o,"select",this),this.settings.handle?"object"===k(this.settings.handle)?r=n()(this.settings.handle):"string"==typeof this.settings.handle?r=n()(o).find(this.settings.handle):"function"==typeof this.settings.handle&&(r=n()(this.settings.handle(o))):r=n()(o),n().data(o,"select-handle",r),r.data("select-item",o);var a=void 0;this.settings.checkboxClass&&(a=n()(o).find(".".concat(this.settings.checkboxClass))),this.addListener(r,"mousedown","onMouseDown"),this.addListener(r,"mouseup","onMouseUp"),this.addListener(r,"click",(function(){this.ignoreClick=!0})),a&&a.length&&(a.data("select-item",o),this.addListener(a,"keydown",(function(t){t.keyCode!==j.RETURN_KEY&&t.keyCode!==j.SPACE_KEY||t.shiftKey||j.isCtrlKeyPressed(t)||(t.preventDefault(),e.onCheckboxActivate(t))}))),this.addListener(o,"keydown","onKeyDown")}this.$items=this.$items.add(i),this.updateIndexes()},removeItems:function(t){t=n().makeArray(t);for(var e=!1,i=!1,s=0;s<t.length;s++){var r=t[s],o=n().inArray(r,this.$items);if(-1!==o){this._deinitItem(r),this.$items.splice(o,1),e=!0;var a=n().inArray(r,this.$selectedItems);-1!==a&&(this.$selectedItems.splice(a,1),i=!0)}}e&&(this.updateIndexes(),i&&(n()(t).removeClass(this.settings.selectedClass),this.onSelectionChange()))},removeAllItems:function(){for(var t=0;t<this.$items.length;t++)this._deinitItem(this.$items[t]);this.$items=n()(),this.$selectedItems=n()(),this.updateIndexes()},updateIndexes:function(){null!==this.first?(this.first=this.getItemIndex(this.$first),this.setFocusableItem(this.$first)):this.$items.length&&this.setFocusableItem(n()(this.$items[0])),this.$focusedItem&&this.focusItem(this.$focusedItem,!0),null!==this.last&&(this.last=this.getItemIndex(this.$last))},resetItemOrder:function(){this.$items=n()().add(this.$items),this.$selectedItems=n()().add(this.$selectedItems),this.updateIndexes()},setFocusableItem:function(t){this.settings.makeFocusable&&(this.$focusable&&this.$focusable.removeAttr("tabindex"),this.$focusable=t.attr("tabindex","0"))},focusItem:function(t,e){this.settings.makeFocusable&&(this.setFocusableItem(t),t[0].focus({preventScroll:!!e})),this.$focusedItem=t,this.trigger("focusItem",{item:t})},getSelectedItems:function(){return n()(this.$selectedItems.toArray())},destroy:function(){this.$container.removeData("select"),this.removeAllItems(),this.base()},onMouseDown:function(t){if(this.mousedownTarget=null,j.isPrimaryClick(t)||j.isCtrlKeyPressed(t)){if(this.settings.filter)if("function"==typeof this.settings.filter){if(!this.settings.filter(t.target))return}else if(!n()(t.target).is(this.settings.filter))return;var e=n()(n().data(t.currentTarget,"select-item"));null!==this.first&&t.shiftKey?this.selectRange(e,!0):!this._actAsCheckbox(t)||this.settings.waitForDoubleClicks&&this.isSelected(e)?this.mousedownTarget=t.currentTarget:this.toggleItem(e,!0)}},onMouseUp:function(t){var e=this;if((j.isPrimaryClick(t)||j.isCtrlKeyPressed(t))&&(!this.settings.filter||n()(t.target).is(this.settings.filter))){var i=n()(n().data(t.currentTarget,"select-item"));if(!t.shiftKey&&t.currentTarget===this.mousedownTarget)if(this.isSelected(i)){var s=function(){e._actAsCheckbox(t)?e.deselectItem(i):e.deselectOthers(i)};this.settings.waitForDoubleClicks?(this.clearMouseUpTimeout(),this.mouseUpTimeout=setTimeout(s,300)):s()}else this._actAsCheckbox(t)||(this.deselectAll(),this.selectItem(i,!0,!0))}},onCheckboxActivate:function(t){t.stopImmediatePropagation();var e=n()(n().data(event.currentTarget,"select-item"));this.isSelected(e)?this.deselectItem(e):this.selectItem(e)},onKeyDown:function(t){var e,i;if(t.target===t.currentTarget||null!==(e=n().data(t.currentTarget,"select-handle"))&&void 0!==e&&e.filter(t.target).length){var s,r,o=j.isCtrlKeyPressed(t),a=t.shiftKey;switch(this.settings.checkboxMode&&null!==(i=this.$focusable)&&void 0!==i&&i.length?-1===(s=n().inArray(this.$focusable[0],this.$items))&&(s=0):s=t.shiftKey?this.last:this.first,t.keyCode){case j.LEFT_KEY:t.preventDefault(),r=null===this.first?j.ltr?this.getLastItem():this.getFirstItem():o?this.getFurthestItemToTheLeft(s):this.getItemToTheLeft(s);break;case j.RIGHT_KEY:t.preventDefault(),r=null===this.first?j.ltr?this.getFirstItem():this.getLastItem():o?this.getFurthestItemToTheRight(s):this.getItemToTheRight(s);break;case j.UP_KEY:t.preventDefault(),null===this.first?(this.$focusable&&(r=this.$focusable.prev()),this.$focusable&&r.length||(r=this.getLastItem())):(r=o?this.getFurthestItemAbove(s):this.getItemAbove(s))||(r=this.getFirstItem());break;case j.DOWN_KEY:t.preventDefault(),null===this.first?(this.$focusable&&(r=this.$focusable.next()),this.$focusable&&r.length||(r=this.getFirstItem())):(r=o?this.getFurthestItemBelow(s):this.getItemBelow(s))||(r=this.getLastItem());break;case j.SPACE_KEY:o||a||(t.preventDefault(),this.isSelected(this.$focusable)?this._canDeselect(this.$focusable)&&this.deselectItem(this.$focusable):this.selectItem(this.$focusable,!0,!1));break;case j.A_KEY:o&&(t.preventDefault(),this.selectAll())}r&&r.length&&(this.settings.checkboxMode?(this.setFocusableItem(r),this.settings.makeFocusable&&r.focus(),this.$focusedItem=r,this.trigger("focusItem",{item:r})):null!==this.first&&t.shiftKey?this.selectRange(r,!1):(this.deselectAll(),this.selectItem(r,!0,!1)))}},onSelectionChange:function(){this.callbackFrame&&(j.cancelAnimationFrame(this.callbackFrame),this.callbackFrame=null),this.callbackFrame=j.requestAnimationFrame(function(){this.callbackFrame=null,this.trigger("selectionChange"),this.settings.onSelectionChange()}.bind(this))},_actAsCheckbox:function(t){return j.isCtrlKeyPressed(t)?!this.settings.checkboxMode:this.settings.checkboxMode},_canDeselect:function(t){return this.settings.allowEmpty||this.totalSelected>t.length},_selectItems:function(t){t.addClass(this.settings.selectedClass),this.settings.checkboxClass&&t.find(".".concat(this.settings.checkboxClass)).attr("aria-checked","true"),this.$selectedItems=this.$selectedItems.add(t),this.onSelectionChange()},_deselectItems:function(t){t.removeClass(this.settings.selectedClass),this.settings.checkboxClass&&t.find(".".concat(this.settings.checkboxClass)).attr("aria-checked","false"),this.$selectedItems=this.$selectedItems.not(t),this.onSelectionChange()},_deinitItem:function(t){var e=n().data(t,"select-handle");e&&(e.removeData("select-item"),this.removeAllListeners(e)),n().removeData(t,"select"),n().removeData(t,"select-handle"),this.$focusedItem&&this.$focusedItem[0]===t&&(this.$focusedItem=null)}},{defaults:{selectedClass:"sel",checkboxClass:"checkbox",multi:!1,allowEmpty:!0,vertical:!1,horizontal:!1,handle:null,filter:null,checkboxMode:!1,makeFocusable:!1,waitForDoubleClicks:!1,onSelectionChange:n().noop},closestItemAxisProps:{x:{midpointOffset:"top",midpointSizeFunc:"outerHeight",rowOffset:"left"},y:{midpointOffset:"left",midpointSizeFunc:"outerWidth",rowOffset:"top"}},closestItemDirectionProps:{"<":{step:-1,isNextRow:function(t,e){return t<e},isWrongDirection:function(t,e){return t>e}},">":{step:1,isNextRow:function(t,e){return t>e},isWrongDirection:function(t,e){return t<e}}}}),Y=m.extend({init:function(t,e,i,s){"function"==typeof i&&(s=i,i={}),i=n().extend({},j.SelectMenu.defaults,i),this.base(t,e,i,s),this.selected=-1},build:function(){this.base(),-1!==this.selected&&this._addSelectedOptionClass(this.selected)},select:function(t){t!==this.selected&&(this.dom.ul&&(-1!==this.selected&&(this.dom.options[this.selected].className=""),this._addSelectedOptionClass(t)),this.selected=t,this.setBtnText(n()(this.options[t].label).text()),this.base(t))},_addSelectedOptionClass:function(t){this.dom.options[t].className="sel"},setBtnText:function(t){this.dom.$btnLabel.text(t)}},{defaults:{ulClass:"menu select"}}),W=h.extend({layers:null,init:function(){this.layers=[{$container:j.$bod,shortcuts:[],options:{bubble:!1}}],this.addListener(j.$bod,"keydown","triggerShortcut")},get layer(){return this.layers.length-1},get currentLayer(){return this.layers[this.layer]},get modalLayers(){return this.layers.filter((function(t){return!0===t.isModal}))},get highestModalLayer(){return this.modalLayers.pop()},addLayer:function(t,e){return n().isPlainObject(t)&&(e=t,t=null),e=Object.assign({bubble:!1},e||{}),this.layers.push({$container:t?n()(t):null,shortcuts:[],isModal:!!t&&"true"===n()(t).attr("aria-modal"),options:e}),this.trigger("addLayer",{layer:this.layer,$container:this.currentLayer.$container,options:e}),this},removeLayer:function(t){if(0===this.layer)throw"Cant remove the base layer.";if(!t)return this.layers.pop(),this.trigger("removeLayer"),this;var e=this.getLayerIndex(t);e&&this.removeLayerAtIndex(e)},getLayerIndex:function(t){var e;return t=n()(t).get(0),n()(this.layers).each((function(i){if(null!==this.$container&&this.$container.get(0)===t)return e=i,!1})),e},removeLayerAtIndex:function(t){return this.layers.splice(t,1),this.trigger("removeLayer"),this},registerShortcut:function(t,e,i){return t=this._normalizeShortcut(t),void 0===i&&(i=this.layer),this.layers[i].shortcuts.push({key:JSON.stringify(t),shortcut:t,callback:e}),this},unregisterShortcut:function(t,e){t=this._normalizeShortcut(t);var i=JSON.stringify(t);void 0===e&&(e=this.layer);var s=this.layers[e].shortcuts.findIndex((function(t){return t.key===i}));return-1!==s&&this.layers[e].shortcuts.splice(s,1),this},_normalizeShortcut:function(t){if("number"==typeof t&&(t={keyCode:t}),"number"!=typeof t.keyCode)throw"Invalid shortcut";return{keyCode:t.keyCode,ctrl:!!t.ctrl,shift:!!t.shift,alt:!!t.alt}},triggerShortcut:function(t,e){var i=this;void 0===e&&(e=this.layer);var s=this.layers[e],n=s.shortcuts.find((function(e){return e.shortcut.keyCode===t.keyCode&&e.shortcut.ctrl===j.isCtrlKeyPressed(t)&&e.shortcut.shift===t.shiftKey&&e.shortcut.alt===t.altKey}));t.bubbleShortcut=function(){e>0&&i.triggerShortcut(t,e-1)},n?(t.preventDefault(),n.callback(t)):s.options.bubble&&t.bubbleShortcut()}});function X(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=Array(e);i<e;i++)s[i]=t[i];return s}if(void 0!==B)throw"Garnish is already defined!";var K,z,R,B={$win:n()(window),$doc:n()(document),$bod:n()(document.body)};function N(){return R=R||new ResizeObserver((function(t){var e,i=function(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return X(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?X(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0,n=function(){};return{s:n,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,r=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw r}}}}(t);try{for(i.s();!(e=i.n()).done;){var s=e.value,r=n().data(s.target,"size");if(r){var o=s.target.getBoundingClientRect(),a=o.width,h=o.height;a===r.width&&h===r.height||(n().data(s.target,"size",{width:a,height:h}),B.resizeEventsMuted||n()(s.target).trigger("resize"))}}}catch(t){i.e(t)}finally{i.f()}}))}B.rtl=B.$bod.hasClass("rtl"),B.ltr=!B.rtl,B=n().extend(B,{$scrollContainer:B.$win,activateEventsMuted:!1,resizeEventsMuted:!1,BACKSPACE_KEY:8,TAB_KEY:9,CLEAR_KEY:12,RETURN_KEY:13,SHIFT_KEY:16,CTRL_KEY:17,ALT_KEY:18,ESC_KEY:27,SPACE_KEY:32,PAGE_UP_KEY:33,PAGE_DOWN_KEY:34,END_KEY:35,HOME_KEY:36,LEFT_KEY:37,UP_KEY:38,RIGHT_KEY:39,DOWN_KEY:40,DELETE_KEY:46,A_KEY:65,S_KEY:83,CMD_KEY:91,META_KEY:224,JS_ARIA_CLASS:"garnish-js-aria",JS_ARIA_TRUE_CLASS:"garnish-js-aria-true",JS_ARIA_FALSE_CLASS:"garnish-js-aria-false",PRIMARY_CLICK:1,SECONDARY_CLICK:3,X_AXIS:"x",Y_AXIS:"y",FX_DURATION:200,TEXT_NODE:3,log:function(t){"undefined"!=typeof console&&"function"==typeof console.log&&console.log(t)},_isMobileBrowser:null,_isMobileOrTabletBrowser:null,isMobileBrowser:function(t){var e=t?"_isMobileOrTabletBrowser":"_isMobileBrowser";if(null===B[e]){var i=navigator.userAgent||navigator.vendor||window.opera;B[e]=new RegExp("(android|bbd+|meego).+mobile|avantgo|bada/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)/|plucker|pocket|psp|series(4|6)0|symbian|treo|up.(browser|link)|vodafone|wap|windows ce|xda|xiino"+(t?"|android|ipad|playbook|silk":""),"i").test(i)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(i.substring(0,4))}return B[e]},prefersReducedMotion:function(){var t=window.matchMedia("(prefers-reduced-motion: reduce)");return!t||t.matches},getUserPreferredAnimationDuration:function(t){return B.prefersReducedMotion()?0:t},isArray:function(t){return Array.isArray(t)},isJquery:function(t){return t instanceof n()},isString:function(t){return"string"==typeof t},hasAttr:function(t,e){var i=n()(t).attr(e);return void 0!==i&&!1!==i},isTextNode:function(t){return t.nodeType===B.TEXT_NODE},getOffset:function(t){return this.getOffset._offset=n()(t).offset(),B.$scrollContainer[0]!==B.$win[0]&&(this.getOffset._offset.top+=B.$scrollContainer.scrollTop(),this.getOffset._offset.left+=B.$scrollContainer.scrollLeft()),this.getOffset._offset},getDist:function(t,e,i,s){return Math.sqrt(Math.pow(t-i,2)+Math.pow(e-s,2))},hitTest:function(t,e,i){return B.hitTest._$elem=n()(i),B.hitTest._offset=B.hitTest._$elem.offset(),B.hitTest._x1=B.hitTest._offset.left,B.hitTest._y1=B.hitTest._offset.top,B.hitTest._x2=B.hitTest._x1+B.hitTest._$elem.outerWidth(),B.hitTest._y2=B.hitTest._y1+B.hitTest._$elem.outerHeight(),t>=B.hitTest._x1&&t<B.hitTest._x2&&e>=B.hitTest._y1&&e<B.hitTest._y2},isCursorOver:function(t,e){return B.hitTest(t.pageX,t.pageY,e)},copyTextStyles:function(t,e){var i=n()(t);n()(e).css({fontFamily:i.css("fontFamily"),fontSize:i.css("fontSize"),fontWeight:i.css("fontWeight"),letterSpacing:i.css("letterSpacing"),lineHeight:i.css("lineHeight"),textAlign:i.css("textAlign"),textIndent:i.css("textIndent"),whiteSpace:i.css("whiteSpace"),wordSpacing:i.css("wordSpacing"),wordWrap:i.css("wordWrap")})},addModalAttributes:function(t){n()(t),n()(t).attr({"aria-modal":"true",role:"dialog"})},hideModalBackgroundLayers:function(){var t=B.uiLayerManager.currentLayer.$container.get(0);B.$bod.children().not("#notifications").each((function(){B.hasJsAriaClass(this)||this===t||B.isScriptOrStyleElement(this)||B.ariaHide(this)}))},resetModalBackgroundLayerVisibility:function(){var t=B.uiLayerManager.highestModalLayer,e=[B.JS_ARIA_CLASS,B.JS_ARIA_TRUE_CLASS,B.JS_ARIA_FALSE_CLASS];if(t)t.$container.removeClass(e).removeAttr("aria-hidden");else{var i=e.map((function(t){return"."+t})).join(", "),s=n()(i);n()(s).each((function(){n()(this).hasClass(B.JS_ARIA_CLASS)?(n()(this).removeClass(B.JS_ARIA_CLASS),n()(this).removeAttr("aria-hidden")):n()(this).hasClass(B.JS_ARIA_FALSE_CLASS)?(n()(this).removeClass(B.JS_ARIA_FALSE_CLASS),n()(this).attr("aria-hidden",!1)):n()(this).hasClass(B.JS_ARIA_TRUE_CLASS)&&(n()(this).removeClass(B.JS_ARIA_TRUE_CLASS),n()(this).attr("aria-hidden",!0))}))}},ariaHide:function(t){var e=n()(t).attr("aria-hidden");e?"false"===e?n()(t).addClass(B.JS_ARIA_FALSE_CLASS):"true"===e&&n()(t).addClass(B.JS_ARIA_TRUE_CLASS):n()(t).addClass(B.JS_ARIA_CLASS),n()(t).attr("aria-hidden","true")},isScriptOrStyleElement:function(t){return"SCRIPT"===n()(t).prop("tagName")||"STYLE"===n()(t).prop("tagName")},hasJsAriaClass:function(t){return n()(t).hasClass(B.JS_ARIA_CLASS)||n()(t).hasClass(B.JS_ARIA_FALSE_CLASS)||n()(t).hasClass(B.JS_ARIA_TRUE_CLASS)},focusIsInside:function(t){return n()(t).find(":focus").length>0},firstFocusableElement:function(t){return n()(t).find(":focusable").first()},getKeyboardFocusableElements:function(t){return n()(t).find(":focusable").filter((function(t,e){return B.isKeyboardFocusable(e)}))},isKeyboardFocusable:function(t){return!(!n()(t).is(":focusable")||"-1"===n()(t).attr("tabindex"))},trapFocusWithin:function(t){var e=n()(t);this.releaseFocusWithin(e),e.on("keydown.focus-trap",(function(t){if(t.keyCode===B.TAB_KEY){var i=e.find(":focusable"),s=i.index(t.target);if(0===i.length)return;0===s&&t.shiftKey?(t.preventDefault(),t.stopPropagation(),i.last().focus()):s!==i.length-1||t.shiftKey||(t.preventDefault(),t.stopPropagation(),i.first().focus())}}))},releaseFocusWithin:function(t){n()(t).off(".focus-trap")},setFocusWithin:function(t){var e=n()(t);if(!e.has(document.activeElement).length){var i=n()(t).find(":focusable:not(.checkbox):not(.prevent-autofocus):first");e.find(".field:visible:first")[0]!==i.parents(".field")[0]&&(i=[]),i.length>0?i.focus():e.attr("tabindex","-1").focus()}},getFocusedElement:function(){return n()(":focus")},handleActivatingKeypress:function(t,e){var i=t.keyCode;i!==B.SPACE_KEY&&i!==B.RETURN_KEY||(t.preventDefault(),e())},getBodyScrollTop:function(){return B.getBodyScrollTop._scrollTop=document.body.scrollTop,B.getBodyScrollTop._scrollTop<0?B.getBodyScrollTop._scrollTop=0:(B.getBodyScrollTop._maxScrollTop=B.$bod.outerHeight()-B.$win.height(),B.getBodyScrollTop._scrollTop>B.getBodyScrollTop._maxScrollTop&&(B.getBodyScrollTop._scrollTop=B.getBodyScrollTop._maxScrollTop)),B.getBodyScrollTop._scrollTop},requestAnimationFrame:(z=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)},function(t){return z(t)}),cancelAnimationFrame:(K=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(t){return K(t)}),scrollContainerToElement:function(t,e){var i;if(void 0===e)s=(i=n()(t)).scrollParent();else{var s=n()(t);i=n()(e)}"HTML"!==s.prop("nodeName")&&s[0]!==B.$doc[0]||(s=B.$win);var r,o=s.scrollTop(),a=i.offset().top,h=!1;if((r=s[0]===window?a-o:a-s.offset().top)<0)h=o+r-10;else{var l=i.outerHeight(),c=s[0]===window?window.innerHeight:s[0].clientHeight;r+l>c&&(h=o+(r-(c-l))+10)}!1!==h&&(s[0]===window?n()("html").velocity("scroll",{offset:h+"px",mobileHA:!1}):s.scrollTop(h))},SHAKE_STEPS:10,SHAKE_STEP_DURATION:25,shake:function(t,e){var i=n()(t);e||(e="margin-left");var s=parseInt(i.css(e));isNaN(s)&&(s=0);for(var r=0;r<=B.SHAKE_STEPS;r++)!function(t){setTimeout((function(){B.shake._properties={},B.shake._properties[e]=s+(t%2?-1:1)*(10-t),i.velocity(B.shake._properties,B.SHAKE_STEP_DURATION)}),B.SHAKE_STEP_DURATION*t)}(r)},getElement:function(t){return n().makeArray(t)[0]},getInputBasename:function(t){var e=n()(t).attr("name");return e?e.replace(/\[.*/,""):null},getInputPostVal:function(t){var e=t.attr("type"),i=t.val();return"checkbox"===e||"radio"===e?t.prop("checked")?i:null:Array.isArray(i)&&"[]"!==t.attr("name").slice(-2)?i.length?i[i.length-1]:null:null===i&&"SELECT"===t.prop("nodeName")?"":i},findInputs:function(t){return n()(t).find("input,text,textarea,select,button")},getPostData:function(t){for(var e,i={},s={},n=B.findInputs(t),r=0;r<n.length;r++){var o=n.eq(r);if(!o.prop("disabled")&&(e=o.attr("name"))){var a=B.getInputPostVal(o);if(null!==a){var h="[]"===e.slice(-2),l=void 0;h&&void 0===s[l=e.substring(0,e.length-2)]&&(s[l]=0),Array.isArray(a)||(a=[a]);for(var c=0;c<a.length;c++)h&&(e=l+"["+s[l]+"]",s[l]++),i[e]=a[c]}}}return i},copyInputValues:function(t,e){for(var i=B.findInputs(t),s=B.findInputs(e),n=0;n<i.length&&void 0!==s[n];n++)"file"!==s.eq(n).attr("type")&&s.eq(n).val(i.eq(n).val())},isPrimaryClick:function(t){return t.which===this.PRIMARY_CLICK&&!t.ctrlKey&&!t.metaKey},isCtrlKeyPressed:function(t){return window.navigator.platform.match(/Mac/)?t.metaKey:t.ctrlKey},_eventHandlers:[],_normalizeEvents:function(t){"string"==typeof t&&(t=t.split(" "));for(var e=0;e<t.length;e++)"string"==typeof t[e]&&(t[e]=t[e].split("."));return t},on:function(t,e,i,s){if(void 0!==t){"function"==typeof i&&(s=i,i={}),e=this._normalizeEvents(e);for(var n=0;n<e.length;n++){var r=e[n];this._eventHandlers.push({target:t,type:r[0],namespace:r[1],data:i,handler:s})}}else console.warn("Garnish.on() called for an invalid target class.")},off:function(t,e,i){e=this._normalizeEvents(e);for(var s=0;s<e.length;s++)for(var n=e[s],r=this._eventHandlers.length-1;r>=0;r--){var o=this._eventHandlers[r];o.target!==t||o.type!==n[0]||n[1]&&o.namespace!==n[1]||o.handler!==i||this._eventHandlers.splice(r,1)}},once:function(t,e,i,s){var n=this;if(void 0!==t){"function"==typeof i&&(s=i,i={});var r=function(i){n.off(t,e,r),s(i)};this.on(t,e,i,r)}else console.warn("Garnish.once() called for an invalid target class.")},muteResizeEvents:function(t){var e=B.resizeEventsMuted;B.resizeEventsMuted=!0,t(),B.resizeEventsMuted=e},within:function(t,e,i){return t=Math.max(t,e),Math.min(t,i)}}),Object.assign(B,{Base:h,BaseDrag:u,CheckboxSelect:d,ContextMenu:g,CustomSelect:m,DisclosureMenu:y,Drag:S,DragDrop:I,DragMove:C,DragSort:x,EscManager:T,HUD:D,MenuBtn:A,MixedInput:M,Modal:H,MultiFunctionBtn:P,NiceText:O,Select:F,SelectMenu:Y,UiLayerManager:W,Menu:m,ShortcutManager:W}),n().extend(n().event.special,{activate:{setup:function(t,e,i){var s=n()(this);s.on({"mousedown.garnish-activate":function(t){"BUTTON"!==t.currentTarget.nodeName&&"button"!==t.currentTarget.role||t.preventDefault()},"click.garnish-activate":function(t){if(!B.activateEventsMuted){var e=s.hasClass("disabled");!e&&"A"===s.prop("nodeName")&&B.hasAttr(s,"href")&&!["#",""].includes(s.attr("href"))&&B.isCtrlKeyPressed(t)||("BUTTON"!==t.currentTarget.nodeName&&"button"!==t.currentTarget.role||t.preventDefault(),e||s.trigger({type:"activate",originalEvent:t}))}},"keydown.garnish-activate":function(t){!B.activateEventsMuted&&this===s[0]&&[B.SPACE_KEY,B.RETURN_KEY].includes(t.keyCode)&&("BUTTON"!==t.currentTarget.nodeName&&"button"!==t.currentTarget.role||t.preventDefault(),s.hasClass("disabled")||s.trigger({type:"activate",originalEvent:t}))}}),s.hasClass("disabled")?s.removeAttr("tabindex"):s.attr("tabindex","0")},teardown:function(){n()(this).off(".garnish-activate")}},textchange:{setup:function(t,e,i){var s=n()(this);s.data("garnish-textchange-value",s.val()),s.on("keypress.garnish-textchange keyup.garnish-textchange change.garnish-textchange blur.garnish-textchange",(function(t){var e=s.val();e!==s.data("garnish-textchange-value")&&(s.data("garnish-textchange-value",e),s.trigger("textchange"))}))},teardown:function(){n()(this).off(".garnish-textchange")},handle:function(t,e){var i,s,r,o=this,a=arguments,h=null!==(i=null!==(s=null==e?void 0:e.delay)&&void 0!==s?s:null==t||null===(r=t.data)||void 0===r?void 0:r.delay)&&void 0!==i?i:null,l=t.handleObj,c=n().data(t.target);if(!h)return l.handler.apply(o,a);c.delayTimeout&&clearTimeout(c.delayTimeout),c.delayTimeout=setTimeout((function(){l.handler.apply(o,a)}),h)}},resize:{setup:function(t,e,i){if(this===window)return!1;var s=this.getBoundingClientRect(),r=s.width,o=s.height;n().data(this,"size",{width:r,height:o}),N().observe(this)},teardown:function(){if(this===window)return!1;N().unobserve(this)}}}),n().each(["activate","textchange","resize"],(function(t,e){n().fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}));var j=B;const U=new j.UiLayerManager;Object.assign(j,{escManager:new j.EscManager,uiLayerManager:U,shortcutManager:U});var V=j},502:function(t,e,i){var s=i(450),n=i(144),r=s.default;void 0===n.Garnish&&(n.Garnish=r),t.exports=s}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s](r,r.exports,i),r.exports}i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,{a:e}),e},i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(502)}();
//# sourceMappingURL=garnish.js.map