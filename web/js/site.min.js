let BandPioneer={STUDIO_FILTER_KEY:"BandPioneer-3xp3d1t10n-filters",STUDIO_AI_KEY:"BandPioneer-3xp3d1t10n-ai",STUDIO_DYNAMIC_KEY:"BandPioneer-dyn@m1c-keywords",AI_URL:"/api/chat-query",each:function(e,t){e=BandPioneer.getCollection(e);for(var n=0;n<e.length;n++)t.bind(e[n])(n,e[n])},getCollection:function(e){return"function"==typeof e[Symbol.iterator]?e:[e]},getBreakpoint:function(){return window.matchMedia("(max-width: 576px)").matches?"sm":window.matchMedia("(max-width: 768px)").matches?"md":window.matchMedia("(max-width: 992px)").matches?"lg":window.matchMedia("(max-width: 1200px)").matches?"xl":"xxl"},aiQuery:async function(e){if(!(e.trim().length>0))return"error";{const t=BandPioneer.AI_URL+"?q="+e;try{const e=await fetch(t);if(e.ok){const t=await e.text(),n=new DOMParser,i=n.parseFromString(t,"text/html").body,o=i.querySelectorAll("script");for(const e of o)i.removeChild(e);return i.textContent}throw console.error("response"),console.error(await e.text()),new Error("Failed to fetch HTML")}catch(e){return console.error("Error:",e),"error"}}},Site:class{static hoveringOverCategory=!1;constructor(e=!1){this.search={ele:document.querySelector("#search"),icon:document.querySelector("#search svg"),input:document.querySelector("#search input")},e||(this.addHeaderEvents(),this.addMenuEvents(),this.addSearchEvents()),this.questionValidation();if(null!==JSON.parse(localStorage.getItem(BandPioneer.STUDIO_AI_KEY))){null!=document.getElementById("studio-menu")&&document.getElementById("studio-menu").classList.add("data-loaded")}}isHTML(e){return"<"===e.charAt(0)}signUp(){this.alert('<iframe src="https://cdn.forms-content.sg-form.com/dfbe0477-dfb9-11ed-a98c-c641367c2345"/>')}alert(e,t){const n=document.createElement("div");n.classList.add("overlay");const i=this.isHTML(e),o=e.length>100||i?"600px":"400px",s=document.createElement("div");s.classList.add("modal"),s.style.cssText="max-width:"+o+";";const r=document.createElement("a");r.classList.add("close-button"),r.innerHTML="x",r.href="/",r.onclick=function(e){e.preventDefault(),document.body.removeChild(n),"function"==typeof t&&t()};const a=document.createElement(i?"div":"p");a.innerHTML=e,n.onclick=function(e){e.target===n&&(document.body.removeChild(n),"function"==typeof t&&t())},s.appendChild(r),s.appendChild(a),n.appendChild(s),document.body.appendChild(n)}questionValidation(){var e=document.getElementById("search-form"),t=this;if(null==e)return!1;const n=["Hey, you didn't enter a question! Try again, and put some oomph into it!","Did you know questions have words? Try to actually enter some this time!","That question is shorter than a Ramones song. Elaborate, please!","Is that a question? Because I sure don't see anything. Enter more characters, please!","Nope! That's not a question. Try again, but with some letters and stuff.","That's no question! Fool me once, shame on you. Fool me twice... Oh, just don't fool me again!","Psst, the 'Question' field is lonely. Entering some words would make it VERY happy."];let i=[];e.addEventListener("submit",(function(e){this.q.value.trim().length<=2&&(t.alert(function(){let e;n.length===i.length&&(i=[]);do{e=Math.floor(Math.random()*n.length)}while(i.includes(e));return i.push(e),n[e]}()),e.preventDefault())}))}showSearch(e){e?(this.search.input.value="",this.search.ele.classList.add("show"),this.search.input.focus()):this.search.ele.classList.remove("show")}addHeaderEvents(){const e=document.querySelector(".page-header");if(e){const t=document.querySelector("header");if(!t.classList.contains("fixed")){new window.IntersectionObserver((e=>{e[0].isIntersecting?t.classList.remove("sticky"):t.classList.add("sticky")})).observe(e)}}}addMenuEvents(){let e=document.querySelector("#main-menu"),t=e.querySelectorAll(".dropdown-menu"),n=document.querySelector("#open-menu"),i=document.querySelector("#close-menu"),o=document.querySelector("#category-menu"),s=document.querySelectorAll("#category-menu nav ul li a");BandPioneer.each(t,(function(){this.querySelector("a").addEventListener("click",(function(e){e.preventDefault();let t=this.nextElementSibling,n=function(e){if(e.target===t&&"click"===e.type)return!1;this.classList.remove("show"),this.removeEventListener("mouseleave",n),document.body.removeEventListener("click",n,!0)}.bind(t);t.classList.contains("show")?(t.classList.remove("show"),t.removeEventListener("mouseleave",n),document.body.removeEventListener("click",n,!0)):(t.classList.add("show"),t.addEventListener("mouseleave",n),document.body.addEventListener("click",n,!0))}))})),n.addEventListener("click",(function(t){t.preventDefault(),e.classList.add("show")})),i.addEventListener("click",(function(t){t.preventDefault(),e.classList.remove("show")})),o&&o.addEventListener("mouseleave",(function(e){e.preventDefault(),BandPioneer.categoryId=0,BandPioneer.hoveringOverCategory=!1,clearTimeout(BandPioneer.categoryTimeout),document.querySelector("#category-description").classList.remove("show")})),BandPioneer.each(s,(function(){this.addEventListener("mouseover",(function(e){e.preventDefault(),BandPioneer.hoveringOverCategory=!0,BandPioneer.categoryId=this.dataset.id;let t=document.querySelector("#category-description");t.querySelector(".container").innerHTML=this.dataset.description,BandPioneer.categoryTimeout=setTimeout(function(){BandPioneer.hoveringOverCategory&&this.catId==BandPioneer.categoryId&&this.catDesc.classList.add("show")}.bind({catDesc:t,catId:this.dataset.id}),500)}))}))}addSearchEvents(){const e=document.querySelector('input[name="q"]');if(null==e)return!1;e.addEventListener("click",(function(e){e.preventDefault()})),this.search.icon.addEventListener("click",function(e){e.preventDefault(),this.search.ele.classList.contains("show")?this.showSearch(!1):this.showSearch(!0)}.bind(this)),this.search.input.addEventListener("blur",function(e){this.showSearch(!1)}.bind(this)),this.search.input.addEventListener("keyup",function(e){27!=(e=e||window.event).keyCode&&13!=e.keyCode||this.showSearch(!1)}.bind(this))}blogPost(){this.readingProgress(),this.toc(),this.instagram(),window.onhashchange=function(){window.history.replaceState(null,null,window.location.pathname)}}toc(){const e=document.querySelector(".blog-header"),t=document.querySelector(".blog-comments"),n=document.querySelector(".related-content"),i=document.querySelector(".blog-container"),o=document.querySelector(".table-of-contents");let s=!1,r=!1;const a=new IntersectionObserver((a=>{a.forEach((a=>{a.target===e?a.isIntersecting?i.classList.remove("sticky"):i.classList.add("sticky"):a.target!==t&&a.target!==n||(a.isIntersecting?(o.classList.add("fadeaway"),a.target===t?s=!0:a.target===n&&(r=!0)):(a.target===t?s=!1:a.target===n&&(r=!1),s||r||o.classList.remove("fadeaway")))}))}),{threshold:0,rootMargin:"-50px 0px 0px 0px"});a.observe(e),a.observe(t),a.observe(n),o.querySelector(".section-title").addEventListener("click",(function(e){o.querySelector("ul").classList.toggle("close"),console.log(BandPioneer.getBreakpoint())}));const d=BandPioneer.getBreakpoint();"sm"!==d&&"md"!==d||o.querySelector("ul").classList.add("close")}readingProgress(){const e=document.getElementById("reading-progress");if(e){const t=Array.from(document.querySelectorAll(".section-title")).pop(),n=t.offsetTop+t.offsetHeight+100;function i(){const e=document.documentElement,t=document.body,i="scrollTop",o=Math.floor((e[i]||t[i])/(n-e.clientHeight)*100);return o>100?100:o}function o(){let t=i()+"%";e.style.width=t,e.parentElement.title="Reading Progress: "+t}window.addEventListener("scroll",(()=>{o()})),o()}}instagram(){var e=document.querySelectorAll(".instagram-media"),t=0;if(e.length>0){const n=function(i){BandPioneer.each(e,(function(i,o){if(void 0===o.embedded||!o.embedded){const i=window.scrollY+window.innerHeight;if(o.getBoundingClientRect().top+window.scrollY<i){o.embedded=!0,t++;const i=o.firstChild,s=document.createElement("iframe");s.src=`https://www.instagram.com/p/${o.dataset.id}/embed/?cr=1&v=14&wp=540&rd=https%3A%2F%2Fbandpioneer.com`,s.setAttribute("style","background: white; max-width: 540px; width: calc(100% - 2px); border-radius: 3px; border: 1px solid rgb(219, 219, 219); box-shadow: none; display: block; margin: 0px 0px 12px; min-width: 326px; padding: 0px;"),s.setAttribute("allowtransparency","true"),s.setAttribute("allowfullscreen","true"),s.setAttribute("frameborder","0"),s.setAttribute("height","705"),s.setAttribute("scrolling","no"),o.insertBefore(s,i),t>=e.length&&window.removeEventListener("scroll",n)}}}))};window.addEventListener("scroll",n)}}createBandCarousels(){let e=document.querySelectorAll(".band-carousel");BandPioneer.each(e,function(e,t){new BandPioneer.BandCarousel(t)}.bind(this))}loginForm(e){document.getElementById(e).addEventListener("submit",(function(e){const t=e.target.password,n=e.target.confirmPassword,i=document.getElementById("confirm-password-error");i&&i.remove(),t.value!==n.value&&(e.preventDefault(),n.insertAdjacentHTML("afterend",'<div id="confirm-password-error" class="errors" style="margin: -25px 0 20px 0;">Passwords do not match.</div>'))}))}loadSearchResponse(e,t){this.aiSearchQuery(e,t),setTimeout((function(){let e=document.getElementById("related-articles");document.getElementById("search-loading").remove(),null!=e&&e.classList.add("loaded")}),Math.floor(2501*Math.random())+1e3)}aiSearchQuery(e,t){if(e.trim().length>0){const n=BandPioneer.AI_URL+"?limit=1000&html=true&results="+t+"&q="+e,i=document.getElementById("ai-response");fetch(n).then((e=>{if(e.ok)return e.text();throw new Error("Failed to fetch HTML")})).then((e=>{i.innerHTML=e,i.classList.add("loaded")})).catch((e=>{console.error("Error:",e)}))}}},BandCarousel:class{constructor(e){this.scrollSpeed=.3,this.direction="left",this.slider=e.querySelector(".band-slider"),this.slides=this.slider.querySelectorAll(".slide"),this.carouselAnimationRequest=null,this.carouselAnimationFrame=null,BandPioneer.each(this.slides,function(e,t){let n=8*Math.random()-4;t.style.transform="rotate("+n+"deg)"}.bind(this)),this.addEventListeners(),this.createAnimationFrame()}addEventListeners(){this.resize=function(){this.slides=this.slider.querySelectorAll(".slide");let e=0;BandPioneer.each(this.slides,(function(t,n){e+=n.getBoundingClientRect().width})),this.slider.style.width=e+50+"px"}.bind(this),window.addEventListener("resize",function(){this.resize()}.bind(this));let e=function(e){let t=void 0===e.clientX?e.touches[0].clientX-this.slider.getBoundingClientRect().x:e.clientX-this.slider.getBoundingClientRect().x;this.stopAnimation();let n=function(e){let n=void 0===e.pageX?e.touches[0].pageX:e.pageX;if(n<0||n>window.innerWidth)return!1;this.slider.offsetWidth,this.slider.getBoundingClientRect();this.slider.style.transform="translateX("+(n-t)+"px)"}.bind(this),i=function(){document.removeEventListener("mousemove",n),document.removeEventListener("touchmove",n),document.removeEventListener("mouseup",i),document.removeEventListener("touchend",i),this.slider.onmouseup=null,this.startAnimation()}.bind(this);document.addEventListener("mousemove",n),document.addEventListener("touchmove",n),document.addEventListener("mouseup",i),document.addEventListener("touchend",i)}.bind(this);this.slider.addEventListener("mousedown",e),this.slider.addEventListener("touchstart",e),this.slider.ondragstart=function(){return!1},this.resize()}startAnimation=function(){this.carouselAnimationRequest=requestAnimationFrame(this.carouselAnimationFrame)};stopAnimation=function(){cancelAnimationFrame(this.carouselAnimationRequest),this.carouselAnimationRequest=null};createAnimationFrame(){this.carouselAnimationFrame=function(){this.carouselAnimationRequest%1e3==0&&this.resize();let e=this.slider.getBoundingClientRect();e.width<window.innerWidth?e.x<=0?this.direction="right":e.width+e.x>window.innerWidth&&(this.direction="left"):e.x>=0?this.direction="left":e.width- -1*e.x<window.innerWidth&&(this.direction="right"),this.slider.style.transform="translateX("+("left"===this.direction?e.x-this.scrollSpeed:e.x+this.scrollSpeed)+"px)",null!==this.carouselAnimationRequest&&this.startAnimation()}.bind(this),this.startAnimation()}}};
