class BandPioneerUX{static stickyListeners=[];constructor(){this.addHeaderEvents(),this.addTopicMenuEvents(),this.startAnimations()}static getBreakpoint(){return window.matchMedia("(max-width: 576px)").matches?"sm":window.matchMedia("(max-width: 768px)").matches?"md":window.matchMedia("(max-width: 992px)").matches?"lg":window.matchMedia("(max-width: 1200px)").matches?"xl":"xxl"}static addStickyListener(e){BandPioneerUX.stickyListeners.push(e)}static callStickyListeners(e){BandPioneerUX.stickyListeners.forEach((t=>t(e)))}static snickerdoodle(){return{get:function(e){let t=`; ${document.cookie}`.split(`; ${e}=`);if(2===t.length)return t.pop().split(";").shift()},set:function(e,t,n){if(isNaN(n))document.cookie=`${e}=${t};path=/`;else{let s=new Date;s.setTime(s.getTime()+24*n*60*60*1e3);var i="expires="+s.toUTCString();document.cookie=`${e}=${t};${i};path=/`}},delete:function(e){let t=BandPioneerUX.snickerdoodle.get(e);document.cookie=`${e}=${t}; path=/; max-age=0;`}}}login(e){return void 0===e&&(e="Sign in to Band Pioneer"),this.openModal("#login-modal",null,e)||(window.location.href="/account"),!1}alert(e,t){const n=document.createElement("div");n.classList.add("overlay");const i=this.isHTML(e),s=e.length>100||i?"600px":"400px",o=document.createElement("div");o.classList.add("modal"),o.style.cssText="max-width:"+s+";";const r=document.createElement("a");r.classList.add("close-button"),r.innerHTML="x",r.href="/",r.onclick=function(e){e.preventDefault(),document.body.removeChild(n),"function"==typeof t&&t()};const a=document.createElement(i?"div":"p");a.innerHTML=e,n.onclick=function(e){e.target===n&&(document.body.removeChild(n),"function"==typeof t&&t())},o.appendChild(r),o.appendChild(a),n.appendChild(o),document.body.appendChild(n)}openModal(e,t,n){const i=document.querySelector(e);if(!i)return!1;const s=i.querySelector(".modal"),o=s.querySelector(".close-button")||s.querySelector(".close-icon-button");if("string"==typeof n){let e=s.querySelector("h3");e&&(e.innerText=n)}return o.onclick=function(e){e.preventDefault(),"function"==typeof t&&t(),i.classList.remove("show")},i.onclick=function(e){e.target.classList.contains("login-provider")||e.preventDefault(),e.target===i&&("function"==typeof t&&t(),i.classList.remove("show"))},i.classList.add("show"),!0}isHTML(e){return"<"===e.charAt(0)}addHeaderEvents(){function e(t){document.getElementById("search-toggle").checked=!1,document.querySelector(".search-dropdown").removeEventListener("mouseleave",e)}document.getElementById("search-toggle").addEventListener("change",(function(){this.checked&&(document.getElementById("search-input").focus(),document.querySelector(".search-dropdown").addEventListener("mouseleave",e))}));const t=function(e){e.target.classList.contains("dropdown")||(document.querySelectorAll("header nav")[0].classList.remove("show"),document.querySelectorAll("header nav ul.show").forEach((e=>{e.classList.remove("show")})),document.removeEventListener("click",t))};document.getElementById("open-menu").addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation();document.querySelectorAll("header nav")[0].classList.toggle("show")?document.addEventListener("click",t):document.removeEventListener("click",t)}));const n=document.querySelectorAll("header nav ul a.dropdown"),i=function(e){document.querySelectorAll("header nav ul.show").forEach((t=>{t.contains(e.target)||e.target.classList.contains("dropdown")||(t.classList.remove("show"),document.removeEventListener("click",i))}))};n.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const t=this.nextElementSibling;t.classList.toggle("show")?document.addEventListener("click",i):document.removeEventListener("click",i),document.querySelectorAll("header nav ul.show").forEach((e=>{e!==t&&e.classList.remove("show")}))}))}));const s=document.querySelector(".sticky-tracker");if(s){const e=document.querySelector("body");new window.IntersectionObserver((t=>{t[0].boundingClientRect.top<250&&(t[0].isIntersecting?(e.classList.remove("sticky"),BandPioneerUX.callStickyListeners(!1)):(e.classList.add("sticky"),BandPioneerUX.callStickyListeners(!0)))}),{rootMargin:"-150px 0px 0px 0px"}).observe(s)}}addTopicMenuEvents(){document.querySelectorAll("[data-popup]").forEach((e=>{var t={obj:this,pop:e};e.hovering=!1,this.popoutDuration=Date.now(),e.addEventListener("mouseover",function(e){const t=Date.now()-this.obj.popoutDuration<500?0:1e3;this.pop.hovering=!0,this.obj.popTimer=setTimeout(function(){this.pop.hovering&&document.getElementById(this.pop.dataset.popup).classList.add("show")}.bind(this),t)}.bind(t)),e.addEventListener("mouseout",function(e){clearTimeout(this.obj.popTimer),document.getElementById(this.pop.dataset.popup).classList.remove("show"),this.pop.hovering=!1,this.obj.popoutDuration=Date.now()}.bind(t))}))}startAnimations(){var e=document.getElementById("cta-text"),t=document.getElementById("cta-image"),n=null;if(e&&t){const o=1,r=parseInt(t.dataset.max);var i=parseInt(t.dataset.idx),s=1;const a=function(){i=i===r?1:i+1,t.classList.add("blur-out"),setTimeout((function(){t.src="/assets/images/bp-homepage-artist-"+i+".png",t.classList.remove("blur-out"),c()}),500)},c=function(){s<r&&(s++,(new Image).src="/assets/images/bp-homepage-artist-"+(i==r?o:i+1)+".png")};new window.IntersectionObserver((e=>{e[0].isIntersecting?setTimeout((function(){a(),n=setInterval(a,8e3)}),1500):clearInterval(n)})).observe(e),c()}}createBlogPost(){new this.BlogPost}createBandCarousels(){document.querySelectorAll(".band-carousel").forEach((e=>{new this.BandCarousel(e)}))}openRankComparisonModal(e){bp.openModal(".rank-comparison-modal"),document.querySelectorAll(".ranker-modal ul li").forEach((function(t){t.classList.remove("pulsate"),t.dataset.key==e&&setTimeout(function(){this.classList.add("pulsate")}.bind(t),200)}))}createRankerCompUX(e,t,n){const i=function(){return`bp-comp-${t}`};var s=!1,o=BandPioneerUX.snickerdoodle().get(i());try{var r=o?JSON.parse(o):null}catch(e){r=null}const a=function(e){if(r){const t=r.find((t=>t.id===e));return t?t.selected:null}return null};for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]],e[t].selected=a(e[t].id)}e[0].selected=a(e[0].id);const c=function(e,t,n){let i=`.ranker-buttons[data-ranker="${e}"]`;document.querySelectorAll(i).forEach((function(e){e.nextElementSibling.classList.contains("compare-selection")&&e.nextElementSibling.remove(),n&&e.insertAdjacentHTML("afterend",`<small class="compare-selection"><strong>${t} was selected as one of your favorites.</strong></small>`)}))};document.querySelectorAll(".compare-container").forEach((function(t){const n=t.nextElementSibling.nextElementSibling.classList.contains("accepted-icon")?t.nextElementSibling.nextElementSibling.innerHTML:"";t.nextElementSibling.classList.contains("reset-compare-btn")&&t.nextElementSibling.addEventListener("click",(function(){t.querySelectorAll(".comp.rejected").forEach((e=>{e.classList.remove("rejected")})),t.nextElementSibling.classList.add("hide"),t.classList.remove("favorites"),t.querySelector(".compare-row").classList.add("active"),s=!1}));const o=function(n){if(n.preventDefault(),s)return!1;s=!0;const o=this.closest(".compare-row"),r=this.dataset.name,a=this.dataset.competitor;if(o){for(let e=0;e<o.children.length;e++){const t=o.children[e];t.classList.contains("comp")&&this!==t&&(this.classList.remove("rejected"),this.classList.add("accepted"),t.classList.remove("accepted"),t.classList.add("rejected"))}setTimeout(function(){o.classList.add("fadeout"),function(t,n,s){for(let t=0;t<e.length;t++)e[t].name==n?(e[t].selected=!0,c(e[t].id,e[t].name,!0)):e[t].name==s&&(e[t].selected=!1,c(e[t].id,e[t].name,!1));BandPioneerUX.snickerdoodle().set(i(),JSON.stringify(e))}(0,r,a),setTimeout(function(){const e=this.nextElementSibling;this.classList.remove("fadeout"),this.classList.remove("active"),e&&e.classList.contains("compare-row")?(e.classList.add("active"),s=!1):(t.classList.add("favorites"),t.nextElementSibling.classList.remove("hide"),s=!0)}.bind(o),500)}.bind(o),1e3)}};for(let i=0;i<e.length;i+=2){const s=e[i],r=e[i+1],a=document.createElement("div");a.classList.add("compare-row"),0===i&&a.classList.add("active");const d=document.createElement("div");d.classList.add("comp"),d.dataset.name=s.name,d.dataset.competitor=r.name,!0===s.selected&&(d.classList.add("accepted"),c(s.id,s.name,!0));let l=`<picture><source srcset="${s.img.desktop}" media="(min-width: 576px)" />`;l+=`<img src="${s.img.mobile}" alt="${s.name}" loading="lazy" width="168" height="168"></picture>`,l+=`<span>${s.name}</span>`,l+=n,d.innerHTML=l,d.addEventListener("click",o);const u=document.createElement("div");u.classList.add("vs"),u.innerHTML="<span>vs.</span>";const m=document.createElement("div");m.classList.add("comp"),m.dataset.name=r.name,m.dataset.competitor=s.name,!0===r.selected&&(m.classList.add("accepted"),c(r.id,r.name,!0));let h=`<picture><source srcset="${r.img.desktop}" media="(min-width: 576px)" />`;h+=`<img src="${r.img.mobile}" alt="${r.name}" loading="lazy" width="168" height="168"></picture>`,h+=`<span>${r.name}</span>`,h+=n,m.innerHTML=h,m.addEventListener("click",o),a.appendChild(d),a.appendChild(u),a.appendChild(m),t.appendChild(a)}}))}BandCarousel=class{constructor(e){this.scrollSpeed=.3,this.direction="left",this.slider=e.querySelector(".band-slider"),this.slides=this.slider.querySelectorAll(".slide"),this.carouselAnimationRequest=null,this.carouselAnimationFrame=null,this.slides.forEach((e=>{let t=8*Math.random()-4;e.style.transform="rotate("+t+"deg)"})),this.addEventListeners(),this.createAnimationFrame()}addEventListeners(){this.resize=function(){this.slides=this.slider.querySelectorAll(".slide");let e=0;this.slides.forEach((t=>{e+=t.getBoundingClientRect().width})),this.slider.style.width=e+50+"px"}.bind(this),window.addEventListener("resize",function(){this.resize()}.bind(this));let e=function(e){let t=void 0===e.clientX?e.touches[0].clientX-this.slider.getBoundingClientRect().x:e.clientX-this.slider.getBoundingClientRect().x;this.stopAnimation();let n=function(e){let n=void 0===e.pageX?e.touches[0].pageX:e.pageX;if(n<0||n>window.innerWidth)return!1;this.slider.offsetWidth,this.slider.getBoundingClientRect();this.slider.style.transform="translateX("+(n-t)+"px)"}.bind(this),i=function(){document.removeEventListener("mousemove",n),document.removeEventListener("touchmove",n),document.removeEventListener("mouseup",i),document.removeEventListener("touchend",i),this.slider.onmouseup=null,this.startAnimation()}.bind(this);document.addEventListener("mousemove",n),document.addEventListener("touchmove",n),document.addEventListener("mouseup",i),document.addEventListener("touchend",i)}.bind(this);this.slider.addEventListener("mousedown",e),this.slider.addEventListener("touchstart",e),this.slider.ondragstart=function(){return!1},this.resize()}startAnimation=function(){this.carouselAnimationRequest=requestAnimationFrame(this.carouselAnimationFrame)};stopAnimation=function(){cancelAnimationFrame(this.carouselAnimationRequest),this.carouselAnimationRequest=null};createAnimationFrame(){this.carouselAnimationFrame=function(){this.carouselAnimationRequest%1e3==0&&this.resize();let e=this.slider.getBoundingClientRect();e.width<window.innerWidth?e.x<=0?this.direction="right":e.width+e.x>window.innerWidth&&(this.direction="left"):e.x>=0?this.direction="left":e.width- -1*e.x<window.innerWidth&&(this.direction="right"),this.slider.style.transform="translateX("+("left"===this.direction?e.x-this.scrollSpeed:e.x+this.scrollSpeed)+"px)",null!==this.carouselAnimationRequest&&this.startAnimation()}.bind(this),this.startAnimation()}};BlogPost=class{constructor(){this.readingProgress(),this.toc(),this.instagram(),this.youtubeLoader()}toc(){const e=document.querySelector(".table-of-contents");if(null===e)return!1;const t=document.querySelector(".blog-header"),n=document.querySelector(".blog-comments"),i=document.querySelector(".related-content"),s=document.querySelector(".blog-container");let o=!1,r=!1;const a=new IntersectionObserver((a=>{a.forEach((a=>{a.target===t?a.isIntersecting?s.classList.remove("sticky"):s.classList.add("sticky"):a.target!==n&&a.target!==i||(a.isIntersecting?(e.classList.add("fadeaway"),a.target===n?o=!0:a.target===i&&(r=!0)):(a.target===n?o=!1:a.target===i&&(r=!1),!e||o||r||e.classList.remove("fadeaway")))}))}),{threshold:0,rootMargin:"-70px 0px 0px 0px"});t&&s&&a.observe(t),a.observe(n),a.observe(i),e&&e.querySelector(".section-title").addEventListener("click",(function(t){e.querySelector("ul").classList.toggle("close")}))}youtubeLoader(){const e=document.querySelectorAll(".yt-loader"),t=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){t.unobserve(e.target);let n=e.target.dataset.caption.length>0?e.target.dataset.caption:e.target.dataset.title,i=`https://www.youtube.com/embed/${e.target.dataset.id}`;e.target.dataset.minute.length&&(i+=`?start=${e.target.dataset.minute}`);let s=`<figure class="video">\n\t\t\t\t\t\t\t\t\t\t<div class="player">\n\t\t\t\t\t\t\t\t\t\t\t<iframe width="560" height="315" src="${i}" title="${n}" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n\t\t\t\t\t\t\t\t\t\t</div>`;e.target.dataset.caption.length>0&&(s+=`<figcaption>${e.target.dataset.caption}</figcaption>`),s+="</figure>",e.target.outerHTML=s}}))}),{threshold:0,rootMargin:"150px"});e.forEach((e=>{t.observe(e)}))}readingProgress(){const e=document.getElementById("reading-time");if(e){const t=e.querySelector(".reading-progress"),n=Array.from(document.querySelectorAll(".section-title")).pop(),i=n.offsetTop+n.offsetHeight+100;function s(){const e=document.documentElement,t=document.body,n="scrollTop",s=Math.floor((e[n]||t[n])/(i-e.clientHeight)*100);return s>100?100:s}function o(){let e=s()+"%";t.style.width=e,t.parentElement.title="Reading Progress: "+e}BandPioneerUX.addStickyListener((function(t){t?e.classList.add("show"):e.classList.remove("show")})),window.addEventListener("scroll",(()=>{o()})),o()}}instagram(){var e=document.querySelectorAll(".instagram-media"),t=0;if(e.length>0){const n=function(i){e.forEach((i=>{if(void 0===i.embedded||!i.embedded){const s=window.scrollY+window.innerHeight;if(i.getBoundingClientRect().top+window.scrollY<s){i.embedded=!0,t++;const s=i.firstChild,o=document.createElement("iframe");o.src=`https://www.instagram.com/p/${i.dataset.id}/embed/?cr=1&v=14&wp=540&rd=https%3A%2F%2Fbandpioneer.com`,o.setAttribute("style","background: white; max-width: 540px; width: calc(100% - 2px); border-radius: 3px; border: 1px solid rgb(219, 219, 219); box-shadow: none; display: block; margin: 0px 0px 12px; min-width: 326px; padding: 0px;"),o.setAttribute("allowtransparency","true"),o.setAttribute("allowfullscreen","true"),o.setAttribute("frameborder","0"),o.setAttribute("height","705"),o.setAttribute("scrolling","no"),i.insertBefore(o,s),t>=e.length&&window.removeEventListener("scroll",n)}}}))};window.addEventListener("scroll",n)}}}}
