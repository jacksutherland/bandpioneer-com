const BandPioneerBands={init:function(){this.addEventListeners()},openView:function(e){if("band"===e)document.querySelector('[data-segment="band"]').click()},deleteLogo:async function(e){let t={id:e};t[window.csrfTokenName]=window.csrfTokenValue;return"success"==(await fetch("/bands/delete-logo",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json()))).result},addEventListeners:function(){const e=document.querySelectorAll(".tab-menu li label");BandPioneer.each(e,(function(){this.addEventListener("click",(function(t){BandPioneer.each(e,(function(){this.classList.remove("active"),document.getElementById(this.dataset.tab).checked=!1})),this.classList.add("active")})),this.classList.contains("active")&&this.click()}));const t=document.querySelectorAll(".checkboxes");BandPioneer.each(t,(function(){const e=this.querySelectorAll("input[type=checkbox]");let t=0;BandPioneer.each(e,(function(){this.checked&&t++,this.addEventListener("change",(function(e){let t=this.getAttribute("name").split("[")[0],n=document.querySelectorAll('input[name*="'+t+'"]'),i=document.querySelectorAll('input[name*="'+t+'"]:checked');BandPioneer.each(n,(function(){this.disabled=i.length>=5&&!this.checked}))}))})),t>=5&&BandPioneer.each(e,(function(){this.disabled=!this.checked}))}));const n=document.querySelectorAll("[data-edit]");BandPioneer.each(n,(function(){this.addEventListener("click",(function(e){e.preventDefault();const t=this,n=document.getElementById(this.dataset.view),i=document.getElementById(this.dataset.edit);n.classList.toggle("show"),i.classList.toggle("show"),i.classList.contains("show")?(t.text="Cancel",t.classList.add("alt-btn")):(t.text="Edit",t.classList.remove("alt-btn"))}))}));const i=document.querySelectorAll(".file-upload");BandPioneer.each(i,(function(){const e=this.querySelector("a.upload-btn"),t=this.querySelector("a.delete-btn"),n=this.querySelector("label"),i=this.querySelector('input[type="file"]'),a=this.querySelector('input[name="caption"]'),s="FORM"===this.nodeName;i.addEventListener("change",function(){if(this.isForm){let e=prompt("Enter a caption you'd like displayed with this image","");null!=e&&(this.caption.value=e,this.parent.submit())}else this.file.files.length>0?this.label.innerHTML=this.label.dataset.name+": <span>"+this.file.files[0].name+"</span>":this.label.innerHTML=this.label.dataset.name}.bind({file:i,label:n,isForm:s,parent:this,caption:a})),e.addEventListener("click",function(e){e.preventDefault(),this.click()}.bind(i)),t&&t.addEventListener("click",function(e){e.preventDefault(),confirm(`Are you sure you want to delete this ${this.label.dataset.name.toLowerCase()}?`)&&BandPioneerBands.deleteLogo(this.deleteLink.dataset.logo).then((function(e){e?window.location.reload():alert("Error: We ran into a problem deleting this file")}))}.bind({deleteLink:t,label:n}))}))}};BandPioneerBands.init();
